<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameHub - Multiplayer Game Rooms</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'orbitron': ['"Orbitron"', 'sans-serif'],
                        'quicksand': ['"Quicksand"', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        
        /* Tron glow effects */
        .tron-glow {
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3);
        }
        
        .tron-border {
            border: 2px solid #00ffff;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5), inset 0 0 10px rgba(0, 255, 255, 0.2);
        }
        
        .tron-text-glow {
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8), 0 0 20px rgba(0, 255, 255, 0.4);
        }
        
        /* Grid background for Tron theme - Simple bright grid */
        .tron-grid {
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
        }
        
        /* Perspective city grid for Tron theme (backup - not used) */
        .tron-grid-city {
            background: 
                linear-gradient(to bottom, 
                    rgba(0, 0, 0, 1) 0%,
                    rgba(0, 20, 40, 1) 50%,
                    rgba(0, 0, 0, 1) 100%
                );
            position: relative;
        }
        
        .tron-grid-city::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 49px,
                    rgba(0, 255, 255, 0.15) 49px,
                    rgba(0, 255, 255, 0.15) 50px
                ),
                repeating-linear-gradient(
                    90deg,
                    transparent,
                    transparent 49px,
                    rgba(0, 255, 255, 0.1) 49px,
                    rgba(0, 255, 255, 0.1) 50px
                );
            background-size: 50px 50px;
            transform: perspective(500px) rotateX(60deg);
            transform-origin: center bottom;
            opacity: 0.6;
        }
        
        .tron-grid-city::after {
            content: '';
            position: absolute;
            inset: 0;
            background: 
                radial-gradient(ellipse at center bottom, transparent 0%, rgba(0, 0, 0, 0.8) 70%);
        }
        
        /* Kids theme styles */
        .kids-bubble {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        /* Robot head eye animation */
        .robot-eye-glow {
            animation: eyeGlow 3s ease-in-out infinite, eyeMove 4s ease-in-out infinite;
        }
        
        @keyframes eyeGlow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        @keyframes eyeMove {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(2px); }
            75% { transform: translateX(-2px); }
        }
        
        /* Constrain kids icon movement */
        .kids-icon-float {
            animation: gentleFloat 6s ease-in-out infinite;
        }
        
        @keyframes gentleFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }
        
        @keyframes softPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* Custom scrollbar styles */
        .scrollbar-tron::-webkit-scrollbar {
            width: 8px;
        }
        
        .scrollbar-tron::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }
        
        .scrollbar-tron::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #06b6d4, #0891b2);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(6, 182, 212, 0.5);
        }
        
        .scrollbar-tron::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #22d3ee, #06b6d4);
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.8);
        }
        
        .scrollbar-kids::-webkit-scrollbar {
            width: 10px;
        }
        
        .scrollbar-kids::-webkit-scrollbar-track {
            background: rgba(216, 180, 254, 0.3);
            border-radius: 10px;
        }
        
        .scrollbar-kids::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #d8b4fe, #a855f7);
            border-radius: 10px;
        }
        
        .scrollbar-kids::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #e9d5ff, #c084fc);
        }
        
        .scrollbar-scary::-webkit-scrollbar {
            width: 8px;
        }
        
        .scrollbar-scary::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
        }
        
        .scrollbar-scary::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #ea580c, #7c2d12);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(234, 88, 12, 0.5);
        }
        
        .scrollbar-scary::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #f97316, #9a3412);
            box-shadow: 0 0 15px rgba(234, 88, 12, 0.8);
        }
        
        .kids-shadow {
            box-shadow: 0 8px 16px rgba(255, 105, 180, 0.3);
        }
        
        /* Star rating */
        .star {
            color: #ffd700;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Lucide icons as SVG components
        const Gamepad2 = ({ className, strokeWidth = 2 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" className={className}>
                <line x1="6" y1="12" x2="10" y2="12"></line>
                <line x1="8" y1="10" x2="8" y2="14"></line>
                <line x1="15" y1="13" x2="15.01" y2="13"></line>
                <line x1="18" y1="11" x2="18.01" y2="11"></line>
                <rect x="2" y="6" width="20" height="12" rx="2"></rect>
            </svg>
        );

        const Users = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
        );

        const QrCode = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <rect x="3" y="3" width="5" height="5"></rect>
                <rect x="16" y="3" width="5" height="5"></rect>
                <rect x="3" y="16" width="5" height="5"></rect>
                <path d="M21 16h-3a2 2 0 0 0-2 2v3"></path>
                <path d="M21 21v.01"></path>
                <path d="M12 7v3a2 2 0 0 1-2 2H7"></path>
                <path d="M3 12h.01"></path>
                <path d="M12 3h.01"></path>
                <path d="M12 16v.01"></path>
                <path d="M16 12h1"></path>
                <path d="M21 12v.01"></path>
                <path d="M12 21v-1"></path>
            </svg>
        );

        const Play = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
        );

        const X = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const Check = ({ className, strokeWidth = 2 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
        );

        const Crown = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"></path>
            </svg>
        );

        const Menu = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <line x1="4" y1="12" x2="20" y2="12"></line>
                <line x1="4" y1="6" x2="20" y2="6"></line>
                <line x1="4" y1="18" x2="20" y2="18"></line>
            </svg>
        );

        const User = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
        );

        const Settings = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
                <circle cx="12" cy="12" r="3"></circle>
            </svg>
        );

        const HelpCircle = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
        );

        const LogOut = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
        );

        const Home = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
        );

        // Game Icons - Simple line style
        const BrainIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/>
                <path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/>
            </svg>
        );

        const PaintBrushIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="m14.622 17.897-10.68-2.913"></path>
                <path d="M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z"></path>
                <path d="M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15"></path>
            </svg>
        );

        const PencilIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path>
            </svg>
        );

        const CardIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <rect x="2" y="4" width="20" height="16" rx="2"></rect>
                <path d="M7 15h0M2 9.5h20"></path>
            </svg>
        );

        const CalculatorIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <rect x="4" y="2" width="16" height="20" rx="2"></rect>
                <line x1="8" y1="6" x2="16" y2="6"></line>
                <line x1="16" y1="14" x2="16" y2="18"></line>
                <path d="M16 10h.01"></path>
                <path d="M12 10h.01"></path>
                <path d="M8 10h.01"></path>
                <path d="M12 14h.01"></path>
                <path d="M8 14h.01"></path>
                <path d="M12 18h.01"></path>
                <path d="M8 18h.01"></path>
            </svg>
        );

        const SmileIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
            </svg>
        );

        const KeyboardIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <rect x="2" y="4" width="20" height="16" rx="2" ry="2"></rect>
                <path d="M6 8h.01"></path>
                <path d="M10 8h.01"></path>
                <path d="M14 8h.01"></path>
                <path d="M18 8h.01"></path>
                <path d="M8 12h.01"></path>
                <path d="M12 12h.01"></path>
                <path d="M16 12h.01"></path>
                <path d="M7 16h10"></path>
            </svg>
        );

        const PuzzleIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z"></path>
            </svg>
        );

        const MusicIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
            </svg>
        );

        const ZapIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
            </svg>
        );

        const BookIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
            </svg>
        );

        const GlobeIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="2" y1="12" x2="22" y2="12"></line>
                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
            </svg>
        );

        const WaveformIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M2 10v3"></path>
                <path d="M6 6v11"></path>
                <path d="M10 3v18"></path>
                <path d="M14 8v7"></path>
                <path d="M18 5v13"></path>
                <path d="M22 10v3"></path>
            </svg>
        );

        const LightbulbIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <line x1="9" y1="18" x2="15" y2="18"></line>
                <line x1="10" y1="22" x2="14" y2="22"></line>
                <path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8 6 6 0 0 0 6 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 0 1 8.91 14"></path>
            </svg>
        );

        const PartyPopperIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M5.8 11.3 2 22l10.7-3.79"></path>
                <path d="M4 3h.01"></path>
                <path d="M22 8h.01"></path>
                <path d="M15 2h.01"></path>
                <path d="M22 20h.01"></path>
                <path d="m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10"></path>
                <path d="m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17"></path>
                <path d="m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7"></path>
                <path d="M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z"></path>
            </svg>
        );

        // Scary theme icons
        const WolfIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M12 4c-2.5 0-4.5 1-6 2.5L4 8l1.5 1.5C6 11 7 12 8.5 12.5"></path>
                <path d="M12 4c2.5 0 4.5 1 6 2.5L20 8l-1.5 1.5C18 11 17 12 15.5 12.5"></path>
                <circle cx="12" cy="16" r="6"></circle>
                <path d="M9 18l-1.5 2"></path>
                <path d="M15 18l1.5 2"></path>
                <circle cx="10" cy="15" r="0.5" fill="currentColor"></circle>
                <circle cx="14" cy="15" r="0.5" fill="currentColor"></circle>
                <path d="M12 17v2"></path>
            </svg>
        );

        const VampireIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M12 2C8 2 5 5 5 9v3c0 1 0 2 1 3l-2 6h16l-2-6c1-1 1-2 1-3V9c0-4-3-7-7-7Z"></path>
                <path d="M8 10h.01"></path>
                <path d="M16 10h.01"></path>
                <path d="M9 15c.5 1.5 1.5 2 3 2s2.5-.5 3-2"></path>
                <path d="M10 11v4"></path>
                <path d="M14 11v4"></path>
                <path d="M7 21l1-3"></path>
                <path d="M17 21l-1-3"></path>
            </svg>
        );

        const SkullIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="8" r="5"></circle>
                <path d="M8 12v2c0 1 1 2 2 2h4c1 0 2-1 2-2v-2"></path>
                <path d="M17 8c0 4-2.5 7-5 7s-5-3-5-7"></path>
                <circle cx="9" cy="8" r="1" fill="currentColor"></circle>
                <circle cx="15" cy="8" r="1" fill="currentColor"></circle>
                <path d="M12 15v6"></path>
                <path d="M9 18h6"></path>
            </svg>
        );

        // Werewolf Howling Icon for Scary theme
        const WerewolfHowlingIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" className={className} fill="currentColor">
                {/* Left ear */}
                <path d="M 25 25 L 20 10 L 30 20 Z" fill="currentColor"/>
                {/* Right ear */}
                <path d="M 75 25 L 80 10 L 70 20 Z" fill="currentColor"/>
                {/* Head */}
                <ellipse cx="50" cy="40" rx="25" ry="22" fill="currentColor" opacity="0.3"/>
                <circle cx="50" cy="40" r="22" fill="currentColor" opacity="0.5"/>
                {/* Eyes */}
                <circle cx="42" cy="36" r="4" fill="#ff8800"/>
                <circle cx="58" cy="36" r="4" fill="#ff8800"/>
                <circle cx="43" cy="35" r="2" fill="#fff"/>
                <circle cx="59" cy="35" r="2" fill="#fff"/>
                {/* Snout */}
                <ellipse cx="50" cy="48" rx="8" ry="10" fill="currentColor" opacity="0.6"/>
                <path d="M 50 45 L 50 52" stroke="currentColor" strokeWidth="2"/>
                <path d="M 45 54 Q 50 56 55 54" stroke="currentColor" strokeWidth="2" fill="none"/>
                {/* Fangs */}
                <path d="M 46 54 L 47 60 L 45 58" fill="#fff"/>
                <path d="M 54 54 L 53 60 L 55 58" fill="#fff"/>
                {/* Body */}
                <ellipse cx="50" cy="72" rx="20" ry="18" fill="currentColor" opacity="0.4"/>
                {/* Arms raised howling */}
                <path d="M 30 65 L 22 55 L 25 68" fill="currentColor" opacity="0.5"/>
                <path d="M 70 65 L 78 55 L 75 68" fill="currentColor" opacity="0.5"/>
                {/* Moon */}
                <circle cx="80" cy="20" r="8" fill="#ffa500" opacity="0.8"/>
            </svg>
        );

        // Character SVG Components
        const CharacterSVG = ({ characterId, size = 120, color = '#06b6d4' }) => {
            const svgStyle = { width: size, height: size };
            
            // Tron Characters
            if (characterId === 'cyber-knight') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <rect x="35" y="20" width="30" height="35" fill={color} opacity="0.3" rx="3"/>
                        <rect x="30" y="15" width="40" height="10" fill={color} rx="2"/>
                        <circle cx="42" cy="22" r="3" fill={color}/>
                        <circle cx="58" cy="22" r="3" fill={color}/>
                        <rect x="38" y="30" width="24" height="2" fill={color}/>
                        <rect x="40" y="55" width="7" height="25" fill={color} opacity="0.5"/>
                        <rect x="53" y="55" width="7" height="25" fill={color} opacity="0.5"/>
                        <rect x="25" y="35" width="10" height="20" fill={color} opacity="0.4"/>
                        <rect x="65" y="35" width="10" height="20" fill={color} opacity="0.4"/>
                        <path d="M 45 32 L 55 32 L 52 38 L 48 38 Z" fill={color}/>
                    </svg>
                );
            }
            if (characterId === 'neon-ninja') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <path d="M 50 15 L 40 25 L 40 45 L 60 45 L 60 25 Z" fill={color} opacity="0.3"/>
                        <path d="M 35 20 L 50 10 L 65 20 L 60 25 L 40 25 Z" fill={color}/>
                        <rect x="43" y="28" width="4" height="8" fill={color}/>
                        <rect x="53" y="28" width="4" height="8" fill={color}/>
                        <rect x="38" y="45" width="24" height="30" fill={color} opacity="0.4" rx="2"/>
                        <rect x="38" y="75" width="9" height="15" fill={color} opacity="0.5"/>
                        <rect x="53" y="75" width="9" height="15" fill={color} opacity="0.5"/>
                        <path d="M 30 50 L 35 45 L 35 65 L 30 60 Z" fill={color} opacity="0.6"/>
                        <path d="M 70 50 L 65 45 L 65 65 L 70 60 Z" fill={color} opacity="0.6"/>
                    </svg>
                );
            }
            if (characterId === 'data-runner') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <circle cx="50" cy="25" r="12" fill={color} opacity="0.3"/>
                        <circle cx="46" cy="23" r="2" fill={color}/>
                        <circle cx="54" cy="23" r="2" fill={color}/>
                        <path d="M 45 28 Q 50 31 55 28" stroke={color} strokeWidth="2" fill="none"/>
                        <rect x="40" y="37" width="20" height="25" fill={color} opacity="0.4" rx="3"/>
                        <rect x="42" y="62" width="6" height="20" fill={color} opacity="0.5"/>
                        <rect x="52" y="62" width="6" height="20" fill={color} opacity="0.5"/>
                        <path d="M 32 45 L 40 40 L 40 55 L 32 50 Z" fill={color} opacity="0.5"/>
                        <path d="M 68 45 L 60 40 L 60 55 L 68 50 Z" fill={color} opacity="0.5"/>
                        <rect x="44" y="82" width="12" height="3" fill={color} rx="1"/>
                    </svg>
                );
            }
            if (characterId === 'circuit-breaker') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <rect x="35" y="18" width="30" height="30" fill={color} opacity="0.2" rx="4"/>
                        <rect x="40" y="15" width="20" height="8" fill={color} rx="2"/>
                        <circle cx="44" cy="28" r="3" fill={color}/>
                        <circle cx="56" cy="28" r="3" fill={color}/>
                        <rect x="46" y="34" width="8" height="3" fill={color}/>
                        <rect x="38" y="48" width="24" height="22" fill={color} opacity="0.4" rx="2"/>
                        <rect x="40" y="70" width="8" height="18" fill={color} opacity="0.5"/>
                        <rect x="52" y="70" width="8" height="18" fill={color} opacity="0.5"/>
                        <rect x="28" y="50" width="10" height="15" fill={color} opacity="0.5"/>
                        <rect x="62" y="50" width="10" height="15" fill={color} opacity="0.5"/>
                        <line x1="35" y1="25" x2="30" y2="25" stroke={color} strokeWidth="2"/>
                        <line x1="65" y1="25" x2="70" y2="25" stroke={color} strokeWidth="2"/>
                    </svg>
                );
            }
            if (characterId === 'byte-fighter') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <rect x="38" y="18" width="24" height="25" fill={color} opacity="0.3" rx="3"/>
                        <rect x="35" y="15" width="30" height="8" fill={color} rx="2"/>
                        <rect x="42" y="22" width="5" height="10" fill={color}/>
                        <rect x="53" y="22" width="5" height="10" fill={color}/>
                        <rect x="40" y="43" width="20" height="25" fill={color} opacity="0.4" rx="2"/>
                        <rect x="41" y="68" width="7" height="20" fill={color} opacity="0.5"/>
                        <rect x="52" y="68" width="7" height="20" fill={color} opacity="0.5"/>
                        <path d="M 25 48 L 35 43 L 35 60 L 28 58 Z" fill={color} opacity="0.6"/>
                        <path d="M 75 48 L 65 43 L 65 60 L 72 58 Z" fill={color} opacity="0.6"/>
                        <rect x="20" y="45" width="8" height="3" fill={color}/>
                        <rect x="72" y="45" width="8" height="3" fill={color}/>
                    </svg>
                );
            }
            if (characterId === 'pixel-warrior') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <rect x="40" y="20" width="20" height="20" fill={color} opacity="0.3"/>
                        <rect x="38" y="17" width="24" height="6" fill={color}/>
                        <rect x="43" y="25" width="4" height="4" fill={color}/>
                        <rect x="53" y="25" width="4" height="4" fill={color}/>
                        <rect x="45" y="32" width="10" height="2" fill={color}/>
                        <rect x="38" y="40" width="24" height="28" fill={color} opacity="0.4"/>
                        <rect x="40" y="68" width="8" height="20" fill={color} opacity="0.5"/>
                        <rect x="52" y="68" width="8" height="20" fill={color} opacity="0.5"/>
                        <rect x="30" y="45" width="8" height="18" fill={color} opacity="0.5"/>
                        <rect x="62" y="45" width="8" height="18" fill={color} opacity="0.5"/>
                    </svg>
                );
            }
            if (characterId === 'tech-ghost') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <path d="M 35 30 Q 35 15 50 15 Q 65 15 65 30 L 65 75 L 60 70 L 55 75 L 50 70 L 45 75 L 40 70 L 35 75 Z" fill={color} opacity="0.3"/>
                        <circle cx="43" cy="32" r="4" fill={color}/>
                        <circle cx="57" cy="32" r="4" fill={color}/>
                        <path d="M 42 42 Q 50 46 58 42" stroke={color} strokeWidth="2" fill="none" opacity="0.6"/>
                        <rect x="36" y="50" width="28" height="3" fill={color} opacity="0.4"/>
                        <rect x="38" y="58" width="24" height="2" fill={color} opacity="0.3"/>
                        <circle cx="50" cy="28" r="2" fill={color} opacity="0.5"/>
                    </svg>
                );
            }
            if (characterId === 'cyber-samurai') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <path d="M 35 18 L 50 12 L 65 18 L 63 25 L 37 25 Z" fill={color}/>
                        <rect x="38" y="25" width="24" height="20" fill={color} opacity="0.3" rx="2"/>
                        <rect x="42" y="30" width="4" height="6" fill={color}/>
                        <rect x="54" y="30" width="4" height="6" fill={color}/>
                        <path d="M 44 38 L 56 38" stroke={color} strokeWidth="2"/>
                        <rect x="40" y="45" width="20" height="25" fill={color} opacity="0.4" rx="2"/>
                        <rect x="42" y="70" width="6" height="18" fill={color} opacity="0.5"/>
                        <rect x="52" y="70" width="6" height="18" fill={color} opacity="0.5"/>
                        <path d="M 32 50 L 38 48 L 38 62 L 32 60 Z" fill={color} opacity="0.6"/>
                        <path d="M 68 50 L 62 48 L 62 62 L 68 60 Z" fill={color} opacity="0.6"/>
                        <rect x="25" y="48" width="10" height="2" fill={color}/>
                    </svg>
                );
            }
            if (characterId === 'grid-master') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <rect x="36" y="16" width="28" height="28" fill="none" stroke={color} strokeWidth="2"/>
                        <line x1="36" y1="23" x2="64" y2="23" stroke={color} strokeWidth="1"/>
                        <line x1="36" y1="30" x2="64" y2="30" stroke={color} strokeWidth="1"/>
                        <line x1="36" y1="37" x2="64" y2="37" stroke={color} strokeWidth="1"/>
                        <line x1="43" y1="16" x2="43" y2="44" stroke={color} strokeWidth="1"/>
                        <line x1="50" y1="16" x2="50" y2="44" stroke={color} strokeWidth="1"/>
                        <line x1="57" y1="16" x2="57" y2="44" stroke={color} strokeWidth="1"/>
                        <rect x="40" y="44" width="20" height="24" fill={color} opacity="0.3" rx="2"/>
                        <rect x="42" y="68" width="7" height="20" fill={color} opacity="0.5"/>
                        <rect x="51" y="68" width="7" height="20" fill={color} opacity="0.5"/>
                        <rect x="32" y="50" width="8" height="15" fill={color} opacity="0.4"/>
                        <rect x="60" y="50" width="8" height="15" fill={color} opacity="0.4"/>
                    </svg>
                );
            }
            if (characterId === 'binary-ace') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <circle cx="50" cy="28" r="14" fill={color} opacity="0.3"/>
                        <text x="42" y="27" fill={color} fontSize="10" fontWeight="bold">01</text>
                        <text x="42" y="35" fill={color} fontSize="10" fontWeight="bold">10</text>
                        <rect x="38" y="42" width="24" height="26" fill={color} opacity="0.4" rx="2"/>
                        <rect x="40" y="68" width="8" height="20" fill={color} opacity="0.5"/>
                        <rect x="52" y="68" width="8" height="20" fill={color} opacity="0.5"/>
                        <rect x="30" y="48" width="8" height="16" fill={color} opacity="0.5"/>
                        <rect x="62" y="48" width="8" height="16" fill={color} opacity="0.5"/>
                        <circle cx="44" cy="55" r="2" fill={color}/>
                        <circle cx="56" cy="55" r="2" fill={color}/>
                    </svg>
                );
            }
            
            // Kids Characters
            if (characterId === 'happy-unicorn') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <circle cx="50" cy="40" r="18" fill={color} opacity="0.3"/>
                        <path d="M 48 22 L 50 10 L 52 22" fill={color}/>
                        <circle cx="43" cy="38" r="3" fill="#000"/>
                        <circle cx="57" cy="38" r="3" fill="#000"/>
                        <path d="M 44 45 Q 50 49 56 45" stroke={color} strokeWidth="2" fill="none"/>
                        <ellipse cx="50" cy="65" rx="16" ry="22" fill={color} opacity="0.4"/>
                        <ellipse cx="40" cy="80" rx="6" ry="10" fill={color} opacity="0.5"/>
                        <ellipse cx="60" cy="80" rx="6" ry="10" fill={color} opacity="0.5"/>
                        <path d="M 35 50 Q 30 55 33 60" stroke={color} strokeWidth="3" fill="none"/>
                        <path d="M 65 50 Q 70 55 67 60" stroke={color} strokeWidth="3" fill="none"/>
                        <ellipse cx="46" cy="27" rx="3" ry="5" fill={color} opacity="0.6"/>
                        <ellipse cx="54" cy="27" rx="3" ry="5" fill={color} opacity="0.6"/>
                    </svg>
                );
            }
            if (characterId === 'cool-fox') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <path d="M 35 25 L 30 10 L 38 20 Z" fill={color}/>
                        <path d="M 65 25 L 70 10 L 62 20 Z" fill={color}/>
                        <circle cx="50" cy="38" r="16" fill={color} opacity="0.4"/>
                        <circle cx="43" cy="36" r="3" fill="#000"/>
                        <circle cx="57" cy="36" r="3" fill="#000"/>
                        <path d="M 50 42 L 50 47 L 46 47" stroke="#000" strokeWidth="2"/>
                        <path d="M 45 48 Q 50 51 55 48" stroke="#000" strokeWidth="2" fill="none"/>
                        <ellipse cx="50" cy="65" rx="14" ry="20" fill={color} opacity="0.4"/>
                        <ellipse cx="42" cy="80" rx="5" ry="8" fill={color} opacity="0.5"/>
                        <ellipse cx="58" cy="80" rx="5" ry="8" fill={color} opacity="0.5"/>
                        <path d="M 40 55 L 35 50 L 38 58" fill={color} opacity="0.5"/>
                        <path d="M 60 55 L 65 50 L 62 58" fill={color} opacity="0.5"/>
                    </svg>
                );
            }
            if (characterId === 'brave-lion') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <circle cx="50" cy="38" r="20" fill={color} opacity="0.2"/>
                        <path d="M 35 25 Q 30 20 32 28 M 40 20 Q 38 15 40 23 M 45 18 Q 45 12 46 20 M 55 18 Q 55 12 54 20 M 60 20 Q 62 15 60 23 M 65 25 Q 70 20 68 28" stroke={color} strokeWidth="2" fill="none"/>
                        <circle cx="50" cy="38" r="14" fill={color} opacity="0.4"/>
                        <circle cx="44" cy="36" r="3" fill="#000"/>
                        <circle cx="56" cy="36" r="3" fill="#000"/>
                        <path d="M 50 40 L 50 44 L 47 44" stroke="#000" strokeWidth="2"/>
                        <path d="M 46 46 Q 50 49 54 46" stroke="#000" strokeWidth="2" fill="none"/>
                        <ellipse cx="50" cy="65" rx="15" ry="22" fill={color} opacity="0.4"/>
                        <ellipse cx="41" cy="82" rx="6" ry="9" fill={color} opacity="0.5"/>
                        <ellipse cx="59" cy="82" rx="6" ry="9" fill={color} opacity="0.5"/>
                    </svg>
                );
            }
            if (characterId === 'smart-panda') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <circle cx="38" cy="30" r="8" fill="#000"/>
                        <circle cx="62" cy="30" r="8" fill="#000"/>
                        <circle cx="50" cy="40" r="16" fill="#fff"/>
                        <ellipse cx="44" cy="38" rx="5" ry="7" fill="#000"/>
                        <ellipse cx="56" cy="38" rx="5" ry="7" fill="#000"/>
                        <circle cx="44" cy="38" r="2" fill="#fff"/>
                        <circle cx="56" cy="38" r="2" fill="#fff"/>
                        <path d="M 50 44 L 50 48 L 48 48" stroke="#000" strokeWidth="2"/>
                        <path d="M 47 49 Q 50 51 53 49" stroke="#000" strokeWidth="2" fill="none"/>
                        <ellipse cx="50" cy="68" rx="14" ry="20" fill="#fff"/>
                        <ellipse cx="43" cy="83" rx="5" ry="8" fill="#000"/>
                        <ellipse cx="57" cy="83" rx="5" ry="8" fill="#000"/>
                        <ellipse cx="35" cy="60" rx="5" ry="8" fill="#000"/>
                        <ellipse cx="65" cy="60" rx="5" ry="8" fill="#000"/>
                    </svg>
                );
            }
            if (characterId === 'silly-frog') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <ellipse cx="50" cy="40" rx="18" ry="16" fill={color} opacity="0.4"/>
                        <circle cx="40" cy="35" r="8" fill="#fff"/>
                        <circle cx="60" cy="35" r="8" fill="#fff"/>
                        <circle cx="40" cy="35" r="4" fill="#000"/>
                        <circle cx="60" cy="35" r="4" fill="#000"/>
                        <path d="M 42 48 Q 50 52 58 48" stroke={color} strokeWidth="2.5" fill="none"/>
                        <ellipse cx="50" cy="68" rx="16" ry="20" fill={color} opacity="0.4"/>
                        <ellipse cx="40" cy="85" rx="8" ry="6" fill={color} opacity="0.5"/>
                        <ellipse cx="60" cy="85" rx="8" ry="6" fill={color} opacity="0.5"/>
                        <circle cx="30" cy="85" r="5" fill={color} opacity="0.6"/>
                        <circle cx="70" cy="85" r="5" fill={color} opacity="0.6"/>
                        <circle cx="25" cy="87" r="3" fill={color} opacity="0.6"/>
                        <circle cx="75" cy="87" r="3" fill={color} opacity="0.6"/>
                    </svg>
                );
            }
            if (characterId === 'speedy-rabbit') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <ellipse cx="38" cy="18" rx="6" ry="16" fill={color} opacity="0.4"/>
                        <ellipse cx="62" cy="18" rx="6" ry="16" fill={color} opacity="0.4"/>
                        <circle cx="50" cy="42" r="16" fill={color} opacity="0.4"/>
                        <circle cx="44" cy="40" r="3" fill="#000"/>
                        <circle cx="56" cy="40" r="3" fill="#000"/>
                        <path d="M 50 46 L 50 50 L 48 50" stroke="#000" strokeWidth="2"/>
                        <path d="M 46 51 Q 50 54 54 51" stroke="#000" strokeWidth="2" fill="none"/>
                        <ellipse cx="50" cy="70" rx="14" ry="18" fill={color} opacity="0.4"/>
                        <circle cx="50" cy="88" r="5" fill={color} opacity="0.5"/>
                        <ellipse cx="42" cy="85" rx="5" ry="7" fill={color} opacity="0.5"/>
                        <ellipse cx="58" cy="85" rx="5" ry="7" fill={color} opacity="0.5"/>
                    </svg>
                );
            }
            if (characterId === 'friendly-bear') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <circle cx="35" cy="28" r="9" fill={color} opacity="0.4"/>
                        <circle cx="65" cy="28" r="9" fill={color} opacity="0.4"/>
                        <circle cx="50" cy="40" r="18" fill={color} opacity="0.4"/>
                        <circle cx="43" cy="38" r="3" fill="#000"/>
                        <circle cx="57" cy="38" r="3" fill="#000"/>
                        <ellipse cx="50" cy="46" rx="6" ry="5" fill={color} opacity="0.6"/>
                        <path d="M 50 48 L 50 51" stroke="#000" strokeWidth="2"/>
                        <path d="M 46 52 Q 50 55 54 52" stroke="#000" strokeWidth="2" fill="none"/>
                        <ellipse cx="50" cy="70" rx="16" ry="22" fill={color} opacity="0.4"/>
                        <ellipse cx="41" cy="86" rx="6" ry="8" fill={color} opacity="0.5"/>
                        <ellipse cx="59" cy="86" rx="6" ry="8" fill={color} opacity="0.5"/>
                    </svg>
                );
            }
            if (characterId === 'magical-cat') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <path d="M 35 22 L 30 10 L 38 25 Z" fill={color} opacity="0.5"/>
                        <path d="M 65 22 L 70 10 L 62 25 Z" fill={color} opacity="0.5"/>
                        <circle cx="50" cy="38" r="15" fill={color} opacity="0.4"/>
                        <circle cx="44" cy="36" r="3" fill="#000"/>
                        <circle cx="56" cy="36" r="3" fill="#000"/>
                        <path d="M 50 40 L 50 44 L 48 44" stroke="#000" strokeWidth="2"/>
                        <path d="M 46 45 Q 50 48 54 45" stroke="#000" strokeWidth="2" fill="none"/>
                        <line x1="38" y1="44" x2="28" y2="42" stroke={color} strokeWidth="1.5"/>
                        <line x1="38" y1="47" x2="28" y2="47" stroke={color} strokeWidth="1.5"/>
                        <line x1="62" y1="44" x2="72" y2="42" stroke={color} strokeWidth="1.5"/>
                        <line x1="62" y1="47" x2="72" y2="47" stroke={color} strokeWidth="1.5"/>
                        <ellipse cx="50" cy="65" rx="13" ry="20" fill={color} opacity="0.4"/>
                        <ellipse cx="43" cy="82" rx="5" ry="8" fill={color} opacity="0.5"/>
                        <ellipse cx="57" cy="82" rx="5" ry="8" fill={color} opacity="0.5"/>
                        <path d="M 55 75 Q 60 70 65 75" stroke={color} strokeWidth="2.5" fill="none"/>
                    </svg>
                );
            }
            if (characterId === 'happy-penguin') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <ellipse cx="50" cy="50" rx="20" ry="30" fill="#000"/>
                        <ellipse cx="50" cy="55" rx="14" ry="22" fill="#fff"/>
                        <circle cx="50" cy="35" r="12" fill="#000"/>
                        <circle cx="45" cy="33" r="3" fill="#fff"/>
                        <circle cx="55" cy="33" r="3" fill="#fff"/>
                        <circle cx="45" cy="33" r="1.5" fill="#000"/>
                        <circle cx="55" cy="33" r="1.5" fill="#000"/>
                        <path d="M 48 38 L 52 38 L 50 41 Z" fill={color}/>
                        <path d="M 47 43 Q 50 45 53 43" stroke="#000" strokeWidth="1.5" fill="none"/>
                        <ellipse cx="32" cy="55" rx="5" ry="12" fill="#000"/>
                        <ellipse cx="68" cy="55" rx="5" ry="12" fill="#000"/>
                        <ellipse cx="42" cy="82" rx="6" ry="4" fill={color}/>
                        <ellipse cx="58" cy="82" rx="6" ry="4" fill={color}/>
                    </svg>
                );
            }
            if (characterId === 'rainbow-koala') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <circle cx="35" cy="30" r="10" fill={color} opacity="0.3"/>
                        <circle cx="65" cy="30" r="10" fill={color} opacity="0.3"/>
                        <ellipse cx="50" cy="42" rx="18" ry="16" fill={color} opacity="0.4"/>
                        <circle cx="44" cy="40" r="4" fill="#000"/>
                        <circle cx="56" cy="40" r="4" fill="#000"/>
                        <ellipse cx="50" cy="47" rx="5" ry="4" fill={color} opacity="0.6"/>
                        <path d="M 46 52 Q 50 54 54 52" stroke="#000" strokeWidth="2" fill="none"/>
                        <ellipse cx="50" cy="70" rx="15" ry="22" fill={color} opacity="0.4"/>
                        <ellipse cx="42" cy="86" rx="6" ry="8" fill={color} opacity="0.5"/>
                        <ellipse cx="58" cy="86" rx="6" ry="8" fill={color} opacity="0.5"/>
                        <path d="M 33 60 Q 28 65 30 70" stroke={color} strokeWidth="3" fill="none"/>
                        <path d="M 67 60 Q 72 65 70 70" stroke={color} strokeWidth="3" fill="none"/>
                    </svg>
                );
            }
            
            // Scary Characters
            if (characterId === 'vampire-lord') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <path d="M 40 22 L 35 10 L 42 20 Z" fill={color}/>
                        <path d="M 60 22 L 65 10 L 58 20 Z" fill={color}/>
                        <ellipse cx="50" cy="35" rx="16" ry="18" fill={color} opacity="0.2"/>
                        <circle cx="43" cy="32" r="4" fill="#ff0000"/>
                        <circle cx="57" cy="32" r="4" fill="#ff0000"/>
                        <path d="M 46 42 L 48 48 L 46 46" fill="#fff"/>
                        <path d="M 54 42 L 52 48 L 54 46" fill="#fff"/>
                        <path d="M 45 45 Q 50 48 55 45" stroke="#ff0000" strokeWidth="2" fill="none"/>
                        <ellipse cx="50" cy="65" rx="14" ry="24" fill={color} opacity="0.3"/>
                        <path d="M 36 55 L 30 60 L 35 68 L 40 65 Z" fill={color} opacity="0.5"/>
                        <path d="M 64 55 L 70 60 L 65 68 L 60 65 Z" fill={color} opacity="0.5"/>
                        <ellipse cx="43" cy="85" rx="5" ry="7" fill={color} opacity="0.4"/>
                        <ellipse cx="57" cy="85" rx="5" ry="7" fill={color} opacity="0.4"/>
                    </svg>
                );
            }
            if (characterId === 'howling-wolf') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <path d="M 38 24 L 33 12 L 40 22 Z" fill={color} opacity="0.5"/>
                        <path d="M 62 24 L 67 12 L 60 22 Z" fill={color} opacity="0.5"/>
                        <ellipse cx="50" cy="38" rx="16" ry="15" fill={color} opacity="0.3"/>
                        <circle cx="43" cy="35" r="3" fill="#ffaa00"/>
                        <circle cx="57" cy="35" r="3" fill="#ffaa00"/>
                        <path d="M 50 40 L 50 48" stroke={color} strokeWidth="2"/>
                        <path d="M 45 50 L 50 48 L 55 50" stroke={color} strokeWidth="2" fill="none"/>
                        <path d="M 44 50 Q 48 53 52 50" stroke="#fff" strokeWidth="1.5" fill="none"/>
                        <ellipse cx="50" cy="68" rx="14" ry="22" fill={color} opacity="0.3"/>
                        <ellipse cx="42" cy="84" rx="6" ry="10" fill={color} opacity="0.4"/>
                        <ellipse cx="58" cy="84" rx="6" ry="10" fill={color} opacity="0.4"/>
                        <path d="M 36 58 L 32 60 L 35 66" fill={color} opacity="0.4"/>
                        <path d="M 64 58 L 68 60 L 65 66" fill={color} opacity="0.4"/>
                    </svg>
                );
            }
            if (characterId === 'ghost-haunter') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <path d="M 35 30 Q 35 15 50 15 Q 65 15 65 30 L 65 78 L 60 72 L 55 78 L 50 72 L 45 78 L 40 72 L 35 78 Z" fill={color} opacity="0.3"/>
                        <circle cx="42" cy="32" r="5" fill="#000"/>
                        <circle cx="58" cy="32" r="5" fill="#000"/>
                        <circle cx="42" cy="32" r="2" fill="#fff"/>
                        <circle cx="58" cy="32" r="2" fill="#fff"/>
                        <ellipse cx="50" cy="42" rx="6" ry="8" fill="#000" opacity="0.5"/>
                        <path d="M 44 52 Q 50 48 56 52" stroke={color} strokeWidth="2" fill="none" opacity="0.6"/>
                        <circle cx="38" cy="55" r="3" fill={color} opacity="0.4"/>
                        <circle cx="62" cy="55" r="3" fill={color} opacity="0.4"/>
                        <circle cx="45" cy="62" r="2" fill={color} opacity="0.3"/>
                        <circle cx="55" cy="62" r="2" fill={color} opacity="0.3"/>
                    </svg>
                );
            }
            if (characterId === 'zombie-king') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <path d="M 38 18 L 35 12 L 40 16 L 42 10 L 44 16 L 48 12 L 50 18 L 52 12 L 56 16 L 58 10 L 60 16 L 65 12 L 62 18 Z" fill="#ffd700"/>
                        <ellipse cx="50" cy="38" rx="18" ry="17" fill={color} opacity="0.2"/>
                        <rect x="41" y="33" width="5" height="7" fill="#000" opacity="0.7"/>
                        <rect x="54" y="33" width="5" height="7" fill="#000" opacity="0.7"/>
                        <path d="M 43 46 L 57 46" stroke="#000" strokeWidth="2.5"/>
                        <rect x="46" y="42" width="8" height="2" fill="#000"/>
                        <ellipse cx="50" cy="68" rx="15" ry="24" fill={color} opacity="0.3"/>
                        <ellipse cx="42" cy="86" rx="6" ry="8" fill={color} opacity="0.4"/>
                        <ellipse cx="58" cy="86" rx="6" ry="8" fill={color} opacity="0.4"/>
                        <path d="M 34 58 L 30 62 L 34 68" fill={color} opacity="0.4"/>
                        <path d="M 66 58 L 70 62 L 66 68" fill={color} opacity="0.4"/>
                        <rect x="36" y="50" width="3" height="8" fill={color} opacity="0.3" transform="rotate(15 37.5 54)"/>
                        <rect x="61" y="50" width="3" height="8" fill={color} opacity="0.3" transform="rotate(-15 62.5 54)"/>
                    </svg>
                );
            }
            if (characterId === 'witch-mage') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <path d="M 35 25 L 50 8 L 65 25 L 62 28 L 38 28 Z" fill={color} opacity="0.6"/>
                        <circle cx="50" cy="28" r="3" fill="#ffd700"/>
                        <ellipse cx="50" cy="40" rx="16" ry="15" fill={color} opacity="0.3"/>
                        <circle cx="44" cy="38" r="3" fill={color}/>
                        <circle cx="56" cy="38" r="3" fill={color}/>
                        <path d="M 46 46 Q 50 48 54 46" stroke={color} strokeWidth="2" fill="none"/>
                        <ellipse cx="50" cy="68" rx="14" ry="24" fill={color} opacity="0.3"/>
                        <path d="M 36 56 L 28 60 L 32 68 L 38 65 Z" fill={color} opacity="0.5"/>
                        <path d="M 64 56 L 72 60 L 68 68 L 62 65 Z" fill={color} opacity="0.5"/>
                        <ellipse cx="43" cy="86" rx="5" ry="7" fill={color} opacity="0.4"/>
                        <ellipse cx="57" cy="86" rx="5" ry="7" fill={color} opacity="0.4"/>
                        <line x1="30" y1="50" x2="25" y2="55" stroke={color} strokeWidth="2"/>
                        <circle cx="24" cy="56" r="2" fill="#ffd700"/>
                    </svg>
                );
            }
            if (characterId === 'skeleton-warrior') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <circle cx="50" cy="30" r="15" fill="none" stroke={color} strokeWidth="2"/>
                        <circle cx="43" cy="28" r="4" fill={color}/>
                        <circle cx="57" cy="28" r="4" fill={color}/>
                        <path d="M 44 36 L 48 38 L 52 38 L 56 36" stroke={color} strokeWidth="2" fill="none"/>
                        <rect x="40" y="45" width="20" height="20" fill="none" stroke={color} strokeWidth="2" rx="2"/>
                        <line x1="45" y1="50" x2="45" y2="60" stroke={color} strokeWidth="2"/>
                        <line x1="50" y1="50" x2="50" y2="60" stroke={color} strokeWidth="2"/>
                        <line x1="55" y1="50" x2="55" y2="60" stroke={color} strokeWidth="2"/>
                        <rect x="42" y="65" width="6" height="22" fill="none" stroke={color} strokeWidth="2"/>
                        <rect x="52" y="65" width="6" height="22" fill="none" stroke={color} strokeWidth="2"/>
                        <line x1="32" y1="48" x2="40" y2="52" stroke={color} strokeWidth="2"/>
                        <line x1="68" y1="48" x2="60" y2="52" stroke={color} strokeWidth="2"/>
                        <line x1="40" y1="52" x2="32" y2="58" stroke={color} strokeWidth="2"/>
                        <line x1="60" y1="52" x2="68" y2="58" stroke={color} strokeWidth="2"/>
                    </svg>
                );
            }
            if (characterId === 'demon-hunter') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <path d="M 38 20 L 32 8 L 38 18 L 42 14 L 44 20" fill={color}/>
                        <path d="M 62 20 L 68 8 L 62 18 L 58 14 L 56 20" fill={color}/>
                        <ellipse cx="50" cy="36" rx="17" ry="16" fill={color} opacity="0.2"/>
                        <path d="M 41 32 L 45 35 L 41 38" fill="#ff0000"/>
                        <path d="M 59 32 L 55 35 L 59 38" fill="#ff0000"/>
                        <path d="M 44 44 Q 50 48 56 44" stroke="#ff0000" strokeWidth="2.5" fill="none"/>
                        <path d="M 47 45 L 49 50 L 47 48" fill="#fff"/>
                        <path d="M 53 45 L 51 50 L 53 48" fill="#fff"/>
                        <ellipse cx="50" cy="66" rx="14" ry="24" fill={color} opacity="0.3"/>
                        <path d="M 36 54 L 28 58 L 32 66 L 38 63 Z" fill={color} opacity="0.5"/>
                        <path d="M 64 54 L 72 58 L 68 66 L 62 63 Z" fill={color} opacity="0.5"/>
                        <ellipse cx="42" cy="85" rx="5" ry="8" fill={color} opacity="0.4"/>
                        <ellipse cx="58" cy="85" rx="5" ry="8" fill={color} opacity="0.4"/>
                    </svg>
                );
            }
            if (characterId === 'dark-wizard') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <path d="M 36 26 L 50 10 L 64 26 L 60 30 L 40 30 Z" fill={color} opacity="0.7"/>
                        <circle cx="48" cy="18" r="2" fill="#9333ea"/>
                        <circle cx="52" cy="18" r="2" fill="#9333ea"/>
                        <circle cx="50" cy="22" r="2" fill="#9333ea"/>
                        <ellipse cx="50" cy="42" rx="16" ry="16" fill={color} opacity="0.3"/>
                        <path d="M 42 40 L 48 42 L 42 44" fill={color}/>
                        <path d="M 58 40 L 52 42 L 58 44" fill={color}/>
                        <path d="M 46 48 Q 50 50 54 48" stroke={color} strokeWidth="2" fill="none"/>
                        <ellipse cx="50" cy="70" rx="15" ry="26" fill={color} opacity="0.3"/>
                        <path d="M 35 58 L 26 64 L 30 74 L 38 70 Z" fill={color} opacity="0.5"/>
                        <path d="M 65 58 L 74 64 L 70 74 L 62 70 Z" fill={color} opacity="0.5"/>
                        <ellipse cx="43" cy="88" rx="5" ry="6" fill={color} opacity="0.4"/>
                        <ellipse cx="57" cy="88" rx="5" ry="6" fill={color} opacity="0.4"/>
                        <path d="M 24 58 L 20 52 L 22 58" stroke="#9333ea" strokeWidth="2"/>
                        <circle cx="20" cy="50" r="3" fill="#9333ea" opacity="0.6"/>
                    </svg>
                );
            }
            if (characterId === 'shadow-reaper') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <path d="M 40 22 L 35 10 L 42 20 Z" fill="#000" opacity="0.8"/>
                        <path d="M 60 22 L 65 10 L 58 20 Z" fill="#000" opacity="0.8"/>
                        <ellipse cx="50" cy="36" rx="18" ry="17" fill="#000" opacity="0.7"/>
                        <circle cx="43" cy="33" r="5" fill={color}/>
                        <circle cx="57" cy="33" r="5" fill={color}/>
                        <circle cx="43" cy="33" r="2" fill="#000"/>
                        <circle cx="57" cy="33" r="2" fill="#000"/>
                        <path d="M 46 44 Q 50 46 54 44" stroke={color} strokeWidth="2" fill="none"/>
                        <ellipse cx="50" cy="68" rx="16" ry="26" fill="#000" opacity="0.6"/>
                        <path d="M 34 56 Q 26 62 28 72 L 36 68 Z" fill="#000" opacity="0.7"/>
                        <path d="M 66 56 Q 74 62 72 72 L 64 68 Z" fill="#000" opacity="0.7"/>
                        <path d="M 32 72 Q 28 78 30 86" stroke={color} strokeWidth="2" fill="none"/>
                        <path d="M 68 72 Q 72 78 70 86" stroke={color} strokeWidth="2" fill="none"/>
                        <ellipse cx="43" cy="88" rx="6" ry="5" fill="#000" opacity="0.6"/>
                        <ellipse cx="57" cy="88" rx="6" ry="5" fill="#000" opacity="0.6"/>
                    </svg>
                );
            }
            if (characterId === 'cursed-mummy') {
                return (
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                        <ellipse cx="50" cy="34" rx="16" ry="18" fill={color} opacity="0.3"/>
                        <rect x="38" y="28" width="24" height="4" fill={color} opacity="0.5"/>
                        <rect x="40" y="34" width="20" height="3" fill={color} opacity="0.5"/>
                        <rect x="38" y="38" width="24" height="4" fill={color} opacity="0.5"/>
                        <circle cx="43" cy="32" r="3" fill="#000"/>
                        <circle cx="57" cy="32" r="3" fill="#000"/>
                        <path d="M 46 42 L 54 42" stroke={color} strokeWidth="2"/>
                        <ellipse cx="50" cy="66" rx="15" ry="24" fill={color} opacity="0.3"/>
                        <rect x="36" y="54" width="28" height="3" fill={color} opacity="0.5"/>
                        <rect x="38" y="60" width="24" height="3" fill={color} opacity="0.5"/>
                        <rect x="36" y="66" width="28" height="3" fill={color} opacity="0.5"/>
                        <rect x="38" y="72" width="24" height="3" fill={color} opacity="0.5"/>
                        <ellipse cx="42" cy="85" rx="6" ry="8" fill={color} opacity="0.4"/>
                        <ellipse cx="58" cy="85" rx="6" ry="8" fill={color} opacity="0.4"/>
                        <path d="M 34 58 L 30 62 L 34 68" fill={color} opacity="0.4"/>
                        <path d="M 66 58 L 70 62 L 66 68" fill={color} opacity="0.4"/>
                    </svg>
                );
            }
            
            // Default fallback
            return (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style={svgStyle}>
                    <circle cx="50" cy="50" r="40" fill={color} opacity="0.3"/>
                    <circle cx="40" cy="40" r="5" fill={color}/>
                    <circle cx="60" cy="40" r="5" fill={color}/>
                    <path d="M 35 60 Q 50 70 65 60" stroke={color} strokeWidth="3" fill="none"/>
                </svg>
            );
        };

        // Map game IDs to icon components
        const getGameIcon = (gameId, className) => {
            const iconMap = {
                1: <BrainIcon className={className} />,
                2: <PaintBrushIcon className={className} />,
                3: <PencilIcon className={className} />,
                4: <CardIcon className={className} />,
                5: <CalculatorIcon className={className} />,
                6: <SmileIcon className={className} />,
                7: <KeyboardIcon className={className} />,
                8: <PuzzleIcon className={className} />,
                9: <MusicIcon className={className} />,
                10: <ZapIcon className={className} />,
                11: <BookIcon className={className} />,
                12: <PaintBrushIcon className={className} />,
                13: <GlobeIcon className={className} />,
                14: <WaveformIcon className={className} />,
                15: <LightbulbIcon className={className} />,
                16: <PartyPopperIcon className={className} />
            };
            return iconMap[gameId] || <Gamepad2 className={className} />;
        };

        const Star = ({ className, filled }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill={filled ? "currentColor" : "none"} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
        );

        const Info = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
        );

        const Youtube = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path>
                <polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>
            </svg>
        );

        const Palette = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="13.5" cy="6.5" r=".5"></circle>
                <circle cx="17.5" cy="10.5" r=".5"></circle>
                <circle cx="8.5" cy="7.5" r=".5"></circle>
                <circle cx="6.5" cy="12.5" r=".5"></circle>
                <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"></path>
            </svg>
        );

        // Daft Punk-inspired Helmet Icon for Tron mode with animated eyes
        const DaftPunkRobotHead = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" className={className} fill="currentColor">
                {/* Helmet outline - sleek angular design */}
                <path d="M 30 20 L 20 40 L 20 75 Q 20 85 30 85 L 70 85 Q 80 85 80 75 L 80 40 L 70 20 Z" 
                      stroke="currentColor" strokeWidth="2.5" fill="none"/>
                
                {/* Top chrome strip */}
                <rect x="25" y="22" width="50" height="6" rx="1" fill="currentColor" opacity="0.4"/>
                
                {/* Visor - iconic horizontal band */}
                <rect x="22" y="38" width="56" height="20" rx="2" fill="currentColor"/>
                <rect x="24" y="40" width="52" height="16" rx="1" fill="black" opacity="0.3"/>
                
                {/* LED lights on visor - animated */}
                <circle cx="35" cy="48" r="2" fill="#00ffff" opacity="0.8" className="robot-eye-glow"/>
                <circle cx="50" cy="48" r="2" fill="#00ffff" opacity="0.8" className="robot-eye-glow" style={{animationDelay: '0.5s'}}/>
                <circle cx="65" cy="48" r="2" fill="#00ffff" opacity="0.8" className="robot-eye-glow" style={{animationDelay: '1s'}}/>
                
                {/* Ventilation grills */}
                <line x1="30" y1="65" x2="45" y2="65" stroke="currentColor" strokeWidth="2" opacity="0.6"/>
                <line x1="55" y1="65" x2="70" y2="65" stroke="currentColor" strokeWidth="2" opacity="0.6"/>
                <line x1="30" y1="70" x2="45" y2="70" stroke="currentColor" strokeWidth="2" opacity="0.6"/>
                <line x1="55" y1="70" x2="70" y2="70" stroke="currentColor" strokeWidth="2" opacity="0.6"/>
                
                {/* Chin piece */}
                <path d="M 30 80 L 35 85 L 65 85 L 70 80" stroke="currentColor" strokeWidth="2" fill="none"/>
                
                {/* Side details */}
                <circle cx="22" cy="48" r="3" stroke="currentColor" strokeWidth="1.5" fill="none"/>
                <circle cx="78" cy="48" r="3" stroke="currentColor" strokeWidth="1.5" fill="none"/>
                
                {/* Angular accents */}
                <line x1="25" y1="58" x2="20" y2="63" stroke="currentColor" strokeWidth="2"/>
                <line x1="75" y1="58" x2="80" y2="63" stroke="currentColor" strokeWidth="2"/>
            </svg>
        );

        // Daft Punk Helmet Icon (keeping for kids mode)
        const DaftPunkHelmet = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" className={className} fill="currentColor">
                <path d="M50 10 C30 10 15 25 15 45 L15 70 C15 80 20 85 30 85 L70 85 C80 85 85 80 85 70 L85 45 C85 25 70 10 50 10 Z" stroke="currentColor" strokeWidth="2" fill="none"/>
                <rect x="25" y="35" width="20" height="15" rx="2" fill="currentColor"/>
                <rect x="55" y="35" width="20" height="15" rx="2" fill="currentColor"/>
                <path d="M35 60 Q50 70 65 60" stroke="currentColor" strokeWidth="3" fill="none" strokeLinecap="round"/>
            </svg>
        );

        // Mock game data
        const MOCK_GAMES = [
            { 
                id: 1, 
                name: 'Trivia Master', 
                icon: '',
                color: '#FF6B6B',
                rating: 4.8,
                description: 'Test your knowledge across multiple categories. Fast-paced questions with real-time scoring.',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '2-8',
                ageMin: 10
            },
            { 
                id: 2, 
                name: 'Drawing Battle', 
                icon: '',
                color: '#4ECDC4',
                rating: 4.6,
                description: 'Draw and guess in this creative multiplayer game. Perfect for artists and doodlers alike!',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '3-10',
                ageMin: 6
            },
            { 
                id: 3, 
                name: 'Word Rush', 
                icon: '',
                color: '#FFE66D',
                rating: 4.7,
                description: 'Create words from letters before time runs out. Competitive wordplay at its finest.',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '1-6',
                ageMin: 8
            },
            { 
                id: 4, 
                name: 'Memory Match', 
                icon: '',
                color: '#95E1D3',
                rating: 4.5,
                description: 'Classic memory card matching with a multiplayer twist. Train your brain!',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '1-4',
                ageMin: 5
            },
            { 
                id: 5, 
                name: 'Quick Math', 
                icon: '',
                color: '#F38181',
                rating: 4.9,
                description: 'Solve math problems faster than your opponents. Educational and exciting!',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '1-8',
                ageMin: 7
            },
            { 
                id: 6, 
                name: 'Emoji Charades', 
                icon: '',
                color: '#AA96DA',
                rating: 4.7,
                description: 'Guess phrases from emoji combinations. Fun for all ages and skill levels.',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '2-12',
                ageMin: 8
            },
            { 
                id: 7, 
                name: 'Speed Typing', 
                icon: '',
                color: '#F9A826',
                rating: 4.4,
                description: 'Race against others in this fast-paced typing challenge. Improve your WPM!',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '1-6',
                ageMin: 10
            },
            { 
                id: 8, 
                name: 'Puzzle Rush', 
                icon: '',
                color: '#5F27CD',
                rating: 4.6,
                description: 'Complete jigsaw puzzles collaboratively or competitively. Multiple difficulty levels.',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '1-4',
                ageMin: 6
            },
            { 
                id: 9, 
                name: 'Music Quiz', 
                icon: '',
                color: '#00D2D3',
                rating: 4.8,
                description: 'Identify songs and artists from short clips. Perfect for music lovers!',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '2-10',
                ageMin: 12
            },
            { 
                id: 10, 
                name: 'Reaction Time', 
                icon: '',
                color: '#FF3838',
                rating: 4.3,
                description: 'Test your reflexes in various quick-tap challenges. Lightning fast gameplay!',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '1-8',
                ageMin: 8
            },
            { 
                id: 11, 
                name: 'Story Builder', 
                icon: '',
                color: '#FF6348',
                rating: 4.5,
                description: 'Collaboratively create hilarious stories one sentence at a time.',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '3-8',
                ageMin: 10
            },
            { 
                id: 12, 
                name: 'Color Match', 
                icon: '',
                color: '#786FA6',
                rating: 4.4,
                description: 'Match colors and patterns in this visually stunning puzzle game.',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '1-4',
                ageMin: 5
            },
            { 
                id: 13, 
                name: 'Geography Quest', 
                icon: '',
                color: '#F8B500',
                rating: 4.7,
                description: 'Explore the world through map challenges and country trivia.',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '2-6',
                ageMin: 12
            },
            { 
                id: 14, 
                name: 'Rhythm Master', 
                icon: '',
                color: '#E74292',
                rating: 4.6,
                description: 'Hit the beats and create music together in this rhythm game.',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '1-6',
                ageMin: 8
            },
            { 
                id: 15, 
                name: 'Logic Puzzles', 
                icon: '',
                color: '#546DE5',
                rating: 4.8,
                description: 'Solve complex logic problems and brain teasers together.',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '1-4',
                ageMin: 14
            },
            { 
                id: 16, 
                name: 'Party Minigames', 
                icon: '',
                color: '#26DE81',
                rating: 4.9,
                description: 'Collection of quick party games perfect for large groups.',
                youtubeLink: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                players: '4-16',
                ageMin: 6
            },
        ];

        // Simulated Socket.io connection
        class MockSocket {
            constructor() {
                this.handlers = {};
                this.rooms = new Map();
                // Pre-populate with dummy room
                this.rooms.set('XU1V2', {
                    id: 'XU1V2',
                    name: "Anderson's Game Room",
                    master: 'Anderson',
                    players: [
                        { name: 'Anderson', isMaster: true, avatar: 'cyber-knight' },
                        { name: 'Sarah', isMaster: false, avatar: 'neon-ninja' },
                        { name: 'Mike', isMaster: false, avatar: 'data-runner' },
                        { name: 'Emma', isMaster: false, avatar: 'circuit-breaker' }
                    ],
                    selectedGames: [1, 5, 9], // Trivia Master, Quick Math, Music Quiz
                });
            }

            on(event, handler) {
                if (!this.handlers[event]) this.handlers[event] = [];
                this.handlers[event].push(handler);
            }

            emit(event, data) {
                setTimeout(() => {
                    if (event === 'createRoom') {
                        const roomId = Math.random().toString(36).substring(2, 8).toUpperCase();
                        const room = {
                            id: roomId,
                            name: data.roomName,
                            master: data.playerName,
                            players: [{ name: data.playerName, isMaster: true, avatar: data.avatar || '' }],
                            selectedGames: [],
                        };
                        this.rooms.set(roomId, room);
                        this.trigger('roomCreated', room);
                    } else if (event === 'joinRoom') {
                        const room = this.rooms.get(data.roomId);
                        if (room) {
                            room.players.push({ name: data.playerName, isMaster: false, avatar: data.avatar || '' });
                            this.trigger('roomJoined', room);
                            this.trigger('playerJoined', { roomId: data.roomId, player: data.playerName, avatar: data.avatar });
                        } else {
                            this.trigger('error', { message: 'Room not found' });
                        }
                    } else if (event === 'toggleGame') {
                        const room = this.rooms.get(data.roomId);
                        if (room) {
                            const index = room.selectedGames.indexOf(data.gameId);
                            if (index > -1) {
                                room.selectedGames.splice(index, 1);
                            } else {
                                room.selectedGames.push(data.gameId);
                            }
                            this.trigger('gamesUpdated', { roomId: data.roomId, selectedGames: room.selectedGames });
                        }
                    } else if (event === 'startGame') {
                        this.trigger('gameStarting', { roomId: data.roomId });
                    }
                }, 100);
            }

            trigger(event, data) {
                if (this.handlers[event]) {
                    this.handlers[event].forEach(handler => handler(data));
                }
            }
        }

        const socket = new MockSocket();

        // Pictionary Game Component
        const PictionaryGame = ({ theme, currentTheme, playerName, selectedAvatar, availableCharacters, currentRoom, isMuted }) => {
            const canvasRef = useRef(null);
            const audioRef = useRef(null);
            const [isDrawing, setIsDrawing] = useState(false);
            const [drawColor, setDrawColor] = useState('#000000');
            const [brushSize, setBrushSize] = useState(3);
            const [isDrawer, setIsDrawer] = useState(true);
            const [currentWord, setCurrentWord] = useState('');
            const [gameTimer, setGameTimer] = useState(60);
            const [chatMessages, setChatMessages] = useState([]);
            const [chatInput, setChatInput] = useState('');
            const [roundWinner, setRoundWinner] = useState(null);
            const [audioStarted, setAudioStarted] = useState(false);
            const [musicStarted, setMusicStarted] = useState(false);
            const [showTimerEndModal, setShowTimerEndModal] = useState(false);

            // Start music function
            const startMusic = () => {
                if (audioRef.current && !isMuted) {
                    // Load the audio source first
                    audioRef.current.load();
                    
                    const playPromise = audioRef.current.play();
                    
                    if (playPromise !== undefined) {
                        playPromise
                            .then(() => {
                                setMusicStarted(true);
                                console.log(' Music started successfully!');
                                console.log('Current theme:', theme);
                                console.log('Audio src:', audioRef.current.currentSrc);
                            })
                            .catch(err => {
                                console.error(' Music play failed:', err);
                                alert(`Music failed to play. Error: ${err.message}\n\nTry:\n1. Check browser volume\n2. Unmute the tab\n3. Click the mute button in header twice`);
                            });
                    }
                } else if (isMuted) {
                    alert('Music is muted. Click the speaker icon in the header to unmute.');
                }
            };

            // Handle mute state changes
            useEffect(() => {
                if (audioRef.current) {
                    if (isMuted) {
                        audioRef.current.pause();
                    } else if (musicStarted) {
                        audioRef.current.play().catch(err => console.log('Resume failed:', err));
                    }
                }
            }, [isMuted, musicStarted]);

            // Initialize game
            useEffect(() => {
                const words = ['ELEPHANT', 'PIZZA', 'RAINBOW', 'ROCKET', 'CASTLE', 'GUITAR', 'ROBOT', 'TREASURE', 'UNICORN', 'DRAGON'];
                setCurrentWord(words[Math.floor(Math.random() * words.length)]);
                
                // Add fake chat messages for development (only for drawer)
                setChatMessages([
                    { player: 'Sarah', message: 'Is it a house?', timestamp: Date.now() - 5000, avatar: 'neon-ninja' },
                    { player: 'Mike', message: 'Castle!', timestamp: Date.now() - 3000, avatar: 'data-runner' },
                    { player: 'Emma', message: 'A building', timestamp: Date.now() - 1000, avatar: 'circuit-breaker' }
                ]);
            }, []);

            // Game timer countdown with modal when time's up
            useEffect(() => {
                if (gameTimer > 0 && !roundWinner) {
                    const timer = setInterval(() => {
                        setGameTimer(prev => {
                            if (prev === 1 && isDrawer) {
                                // Time's up - show modal
                                setShowTimerEndModal(true);
                            }
                            return prev - 1;
                        });
                    }, 1000);
                    return () => clearInterval(timer);
                }
            }, [gameTimer, roundWinner, isDrawer]);

            const startDrawing = (e) => {
                if (!isDrawer) return;
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                const rect = canvas.getBoundingClientRect();
                const x = (e.clientX || e.touches?.[0]?.clientX) - rect.left;
                const y = (e.clientY || e.touches?.[0]?.clientY) - rect.top;
                
                ctx.beginPath();
                ctx.moveTo(x, y);
                setIsDrawing(true);
            };

            const draw = (e) => {
                if (!isDrawing || !isDrawer) return;
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                const rect = canvas.getBoundingClientRect();
                const x = (e.clientX || e.touches?.[0]?.clientX) - rect.left;
                const y = (e.clientY || e.touches?.[0]?.clientY) - rect.top;
                
                ctx.strokeStyle = drawColor;
                ctx.lineWidth = brushSize;
                ctx.lineCap = 'round';
                ctx.lineTo(x, y);
                ctx.stroke();
            };

            const stopDrawing = () => {
                setIsDrawing(false);
            };

            const clearCanvas = () => {
                if (!isDrawer) return;
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            };

            const sendMessage = () => {
                if (!chatInput.trim() || isDrawer) return;
                const newMessage = {
                    player: playerName,
                    message: chatInput,
                    timestamp: Date.now(),
                    avatar: selectedAvatar
                };
                setChatMessages(prev => [...prev, newMessage]);
                setChatInput('');
            };

            const selectWinner = (messageName) => {
                setRoundWinner(messageName);
                setShowTimerEndModal(false); // Close modal when winner selected
                setTimeout(() => {
                    setIsDrawer(false);
                    setRoundWinner(null);
                    setGameTimer(60);
                    setChatMessages([]);
                    const words = ['MOUNTAIN', 'AIRPLANE', 'BIRTHDAY', 'TELESCOPE', 'WATERFALL', 'DINOSAUR'];
                    setCurrentWord(words[Math.floor(Math.random() * words.length)]);
                }, 3000);
            };

            return (
                <div className={`min-h-screen ${theme === 'tron' ? 'bg-black tron-grid' : theme === 'kids' ? 'bg-gradient-to-br from-orange-300 via-pink-400 to-purple-500' : 'bg-gradient-to-br from-gray-900 via-orange-950 to-black'} p-4 pt-24`}>
                    {/* Background Music */}
                    <audio ref={audioRef} loop>
                        {theme === 'tron' && (
                            <source src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3" type="audio/mpeg" />
                        )}
                        {theme === 'kids' && (
                            <source src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3" type="audio/mpeg" />
                        )}
                        {theme === 'scary' && (
                            <source src="https://assets.mixkit.co/active_storage/sfx/2462/2462-preview.mp3" type="audio/mpeg" />
                        )}
                        Your browser does not support the audio element.
                    </audio>

                    {/* Music Start Button - appears until clicked */}
                    {!musicStarted && !isMuted && (
                        <div className="fixed top-24 right-4 z-50 animate-bounce">
                            <button
                                onClick={startMusic}
                                className={`${theme === 'tron' ? 'bg-cyan-500 text-black tron-glow' : theme === 'kids' ? 'bg-purple-500 text-white' : 'bg-orange-600 text-white'} px-6 py-3 rounded-xl font-bold shadow-xl flex items-center gap-2 hover:scale-105 transition-all`}
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                    <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                    <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
                                    <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                                </svg>
                                 Start Music
                            </button>
                        </div>
                    )}
                    
                    <div className="max-w-7xl mx-auto">
                        {/* Game Header - Ultra Compact Single Row */}
                        <div className={`${currentTheme.cardBg} backdrop-blur-lg rounded-lg p-2 ${theme === 'tron' ? 'border border-cyan-500/30' : theme === 'kids' ? 'border-2 border-purple-400' : 'border border-orange-700'} mb-2`}>
                            <div className="flex items-center justify-between gap-2">
                                {/* Game Name - Compact */}
                                <h1 className={`text-sm md:text-lg font-bold ${currentTheme.text} ${currentTheme.font} whitespace-nowrap`}>
                                    {theme === 'tron' ? 'PICTIONARY' : theme === 'kids' ? ' Drawing' : 'PICTIONARY'}
                                </h1>
                                
                                {/* Word (if drawer) - Compact */}
                                {isDrawer && (
                                    <div className={`${theme === 'tron' ? 'bg-cyan-500/20 border border-cyan-500/30 text-cyan-400' : theme === 'kids' ? 'bg-purple-500 text-white' : 'bg-orange-700/40 text-orange-400 border border-orange-700'} px-2 py-1 rounded-lg flex items-center gap-1`}>
                                        <span className="text-[0.6rem] opacity-70">Word:</span>
                                        <span className="text-xs md:text-sm font-black tracking-wide">{currentWord}</span>
                                    </div>
                                )}
                                
                                {/* Timer - Compact */}
                                <div className={`${gameTimer <= 10 ? (theme === 'tron' ? 'bg-red-500/20 text-red-400 border border-red-500' : theme === 'kids' ? 'bg-red-500 text-white' : 'bg-red-700/40 text-red-400 border border-red-700') : (theme === 'tron' ? 'bg-cyan-500/20 border border-cyan-500/30 text-cyan-400' : theme === 'kids' ? 'bg-green-500 text-white' : 'bg-orange-700/40 text-orange-400 border border-orange-700')} px-2 py-1 rounded-lg flex items-center gap-1 ${gameTimer <= 10 ? 'animate-pulse' : ''}`}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <polyline points="12 6 12 12 16 14"></polyline>
                                    </svg>
                                    <span className="text-sm md:text-base font-black">{gameTimer}s</span>
                                </div>
                            </div>
                        </div>

                        {/* Main Game Area - Canvas and Chat */}
                        <div className="grid lg:grid-cols-3 gap-4 mb-4">
                            {/* Drawing Canvas */}
                            <div className="lg:col-span-2">
                                <div className={`${currentTheme.cardBg} backdrop-blur-lg rounded-2xl p-4 ${theme === 'tron' ? 'tron-border' : theme === 'kids' ? 'border-4 border-purple-400' : 'border-2 border-orange-700'}`}>
                                    {isDrawer && (
                                        <div className="flex flex-wrap items-center gap-3 mb-4">
                                            <div className="flex items-center gap-2">
                                                <label className={`text-sm font-semibold ${currentTheme.text}`}>Color:</label>
                                                <input 
                                                    type="color" 
                                                    value={drawColor} 
                                                    onChange={(e) => setDrawColor(e.target.value)}
                                                    className="w-12 h-12 rounded cursor-pointer border-2"
                                                />
                                                <button onClick={() => setDrawColor('#000000')} className="w-8 h-8 bg-black border-2 rounded" title="Black"></button>
                                                <button onClick={() => setDrawColor('#ff0000')} className="w-8 h-8 bg-red-500 border-2 rounded" title="Red"></button>
                                                <button onClick={() => setDrawColor('#0000ff')} className="w-8 h-8 bg-blue-500 border-2 rounded" title="Blue"></button>
                                                <button onClick={() => setDrawColor('#00ff00')} className="w-8 h-8 bg-green-500 border-2 rounded" title="Green"></button>
                                                <button onClick={() => setDrawColor('#ffffff')} className="w-8 h-8 bg-white border-2 border-gray-400 rounded" title="Eraser (White)"></button>
                                            </div>
                                            <div className="flex items-center gap-2">
                                                <label className={`text-sm font-semibold ${currentTheme.text}`}>Size:</label>
                                                <input 
                                                    type="range" 
                                                    min="1" 
                                                    max="20" 
                                                    value={brushSize} 
                                                    onChange={(e) => setBrushSize(e.target.value)}
                                                    className="w-24"
                                                />
                                                <span className={currentTheme.text}>{brushSize}px</span>
                                            </div>
                                            <button 
                                                onClick={clearCanvas}
                                                className={`${theme === 'tron' ? 'bg-red-500/30 hover:bg-red-500/50 text-red-400' : theme === 'kids' ? 'bg-red-500 hover:bg-red-400 text-white' : 'bg-red-700/40 hover:bg-red-700/60 text-red-400'} px-4 py-2 rounded-lg font-semibold transition-all`}
                                            >
                                                Clear
                                            </button>
                                        </div>
                                    )}
                                    <canvas
                                        ref={canvasRef}
                                        width={800}
                                        height={600}
                                        onMouseDown={startDrawing}
                                        onMouseMove={draw}
                                        onMouseUp={stopDrawing}
                                        onMouseLeave={stopDrawing}
                                        onTouchStart={startDrawing}
                                        onTouchMove={draw}
                                        onTouchEnd={stopDrawing}
                                        className={`w-full bg-white rounded-xl ${isDrawer ? 'cursor-crosshair' : 'cursor-not-allowed'} touch-none`}
                                        style={{ maxHeight: '600px' }}
                                    />
                                </div>
                            </div>

                            {/* Chat/Guessing Area - Auto height */}
                            <div className={`${currentTheme.cardBg} backdrop-blur-lg rounded-xl md:rounded-2xl p-3 md:p-4 ${theme === 'tron' ? 'border border-cyan-500/30' : theme === 'kids' ? 'border-2 md:border-4 border-purple-400' : 'border border-orange-700'} flex flex-col h-[400px] md:h-[500px]`}>
                                <h3 className={`text-sm md:text-lg font-bold ${currentTheme.text} mb-2 ${currentTheme.font}`}>
                                    {isDrawer ? (theme === 'tron' ? '> GUESSES' : ' Guesses') : (theme === 'tron' ? '> YOUR_GUESS' : ' Your Guess')}
                                </h3>

                                {/* Messages - Visible without scrolling */}
                                <div className={`flex-1 overflow-y-auto mb-2 space-y-2 ${theme === 'tron' ? 'scrollbar-tron' : theme === 'kids' ? 'scrollbar-kids' : 'scrollbar-scary'}`}>
                                    {chatMessages.map((msg, idx) => {
                                        const character = availableCharacters.find(c => c.id === msg.avatar) || availableCharacters[0];
                                        return (
                                            <div 
                                                key={idx} 
                                                className={`${theme === 'tron' ? 'bg-cyan-500/10 border border-cyan-500/30' : theme === 'kids' ? 'bg-purple-100 border-2 border-purple-300' : 'bg-orange-900/20 border border-orange-700/50'} rounded-lg p-3 ${isDrawer ? 'cursor-pointer hover:scale-102 transition-transform' : ''}`}
                                                onClick={() => isDrawer && !roundWinner && selectWinner(msg.player)}
                                            >
                                                <div className="flex items-start gap-2">
                                                    <div className="w-8 h-8">
                                                        <CharacterSVG characterId={msg.avatar} size={32} color={character.color} />
                                                    </div>
                                                    <div className="flex-1">
                                                        <div className={`font-bold text-sm ${currentTheme.text}`}>{msg.player}</div>
                                                        <div className={`${currentTheme.textSecondary} text-sm`}>{msg.message}</div>
                                                    </div>
                                                    {isDrawer && !roundWinner && (
                                                        <button className={`${theme === 'tron' ? 'text-cyan-400 hover:text-cyan-300' : theme === 'kids' ? 'text-green-600 hover:text-green-500' : 'text-orange-500 hover:text-orange-400'} text-xs font-semibold`}>
                                                             Winner
                                                        </button>
                                                    )}
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>

                                {/* Winner Announcement */}
                                {roundWinner && (
                                    <div className={`${theme === 'tron' ? 'bg-green-500/20 border-2 border-green-500' : theme === 'kids' ? 'bg-green-400 text-white' : 'bg-green-700/40 border-2 border-green-600'} rounded-xl p-4 mb-3 text-center animate-pulse`}>
                                        <div className="text-2xl font-black mb-1"> {roundWinner} WINS! </div>
                                        <div className="text-sm opacity-80">Switching roles...</div>
                                    </div>
                                )}

                                {/* Input */}
                                {!isDrawer && !roundWinner && (
                                    <div className="flex gap-2">
                                        <input
                                            type="text"
                                            value={chatInput}
                                            onChange={(e) => setChatInput(e.target.value)}
                                            onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
                                            placeholder="Type your guess..."
                                            className={`flex-1 ${theme === 'tron' ? 'bg-gray-900 text-cyan-400 border border-cyan-500/30' : theme === 'kids' ? 'bg-white text-purple-900 border-2 border-purple-300' : 'bg-gray-900 text-orange-400 border border-orange-700/50'} px-4 py-2 rounded-lg focus:outline-none focus:ring-2 ${theme === 'tron' ? 'focus:ring-cyan-400' : theme === 'kids' ? 'focus:ring-purple-500' : 'focus:ring-orange-600'}`}
                                        />
                                        <button
                                            onClick={sendMessage}
                                            className={`${theme === 'tron' ? 'bg-cyan-500 hover:bg-cyan-400 text-black' : theme === 'kids' ? 'bg-purple-500 hover:bg-purple-400 text-white' : 'bg-orange-700 hover:bg-orange-600 text-white'} px-6 py-2 rounded-lg font-bold transition-all`}
                                        >
                                            Send
                                        </button>
                                    </div>
                                )}

                                {isDrawer && !roundWinner && (
                                    <div className={`${currentTheme.textSecondary} text-center text-sm p-3 rounded-lg ${theme === 'tron' ? 'bg-cyan-500/5' : theme === 'kids' ? 'bg-purple-50' : 'bg-orange-900/10'}`}>
                                        Click on a guess to select the winner!
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Timer End Modal - Pick Winner */}
                        {showTimerEndModal && isDrawer && (
                            <div className="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50">
                                <div className={`${currentTheme.cardBg} backdrop-blur-xl rounded-3xl p-6 md:p-8 max-w-2xl w-full max-h-[80vh] flex flex-col ${theme === 'tron' ? 'tron-border' : theme === 'kids' ? 'border-4 border-purple-400' : 'border-4 border-orange-700'}`}>
                                    {/* Header */}
                                    <div className="text-center mb-4">
                                        <h2 className={`text-2xl md:text-3xl font-black ${currentTheme.text} mb-2 ${currentTheme.font}`}>
                                             TIME'S UP!
                                        </h2>
                                        <p className={`${currentTheme.textSecondary} text-sm md:text-base`}>
                                            The word was: <span className={`font-black ${currentTheme.text}`}>{currentWord}</span>
                                        </p>
                                        <p className={`${currentTheme.textSecondary} text-sm mt-2`}>
                                            Click on the player who got closest to select them as the winner
                                        </p>
                                    </div>

                                    {/* Scrollable Guesses */}
                                    <div className={`flex-1 overflow-y-auto space-y-2 mb-4 ${theme === 'tron' ? 'scrollbar-tron' : theme === 'kids' ? 'scrollbar-kids' : 'scrollbar-scary'}`}>
                                        {chatMessages.length === 0 ? (
                                            <div className={`${currentTheme.textSecondary} text-center py-8`}>
                                                No guesses were made
                                            </div>
                                        ) : (
                                            chatMessages.map((msg, idx) => {
                                                const character = availableCharacters.find(c => c.id === msg.avatar) || availableCharacters[0];
                                                return (
                                                    <button
                                                        key={idx}
                                                        onClick={() => selectWinner(msg.player)}
                                                        className={`w-full ${theme === 'tron' ? 'bg-cyan-500/10 border border-cyan-500/30 hover:bg-cyan-500/20' : theme === 'kids' ? 'bg-purple-100 border-2 border-purple-300 hover:bg-purple-200' : 'bg-orange-900/20 border border-orange-700/50 hover:bg-orange-900/30'} rounded-lg p-3 transition-all hover:scale-102`}
                                                    >
                                                        <div className="flex items-start gap-3">
                                                            <div className="w-10 h-10 flex-shrink-0">
                                                                <CharacterSVG characterId={msg.avatar} size={40} color={character.color} />
                                                            </div>
                                                            <div className="flex-1 text-left">
                                                                <div className={`font-bold text-sm ${currentTheme.text}`}>{msg.player}</div>
                                                                <div className={`${currentTheme.textSecondary} text-sm mt-1`}>{msg.message}</div>
                                                            </div>
                                                            <div className={`${theme === 'tron' ? 'text-cyan-400' : theme === 'kids' ? 'text-green-600' : 'text-orange-500'} font-semibold text-xs flex items-center gap-1`}>
                                                                 Pick
                                                            </div>
                                                        </div>
                                                    </button>
                                                );
                                            })
                                        )}
                                    </div>

                                    {/* Close Button */}
                                    <button
                                        onClick={() => setShowTimerEndModal(false)}
                                        className={`w-full ${theme === 'tron' ? 'bg-gray-800 hover:bg-gray-700 text-cyan-400' : theme === 'kids' ? 'bg-purple-200 hover:bg-purple-300 text-purple-900' : 'bg-gray-800 hover:bg-gray-700 text-orange-400'} font-bold py-3 rounded-xl transition-all`}
                                    >
                                        Close
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* Players List at Bottom - Drawing Order */}
                        <div className={`${currentTheme.cardBg} backdrop-blur-lg rounded-xl md:rounded-2xl p-3 md:p-4 ${theme === 'tron' ? 'tron-border' : theme === 'kids' ? 'border-2 md:border-4 border-purple-400' : 'border-2 border-orange-700'}`}>
                            <h3 className={`text-sm md:text-lg font-bold ${currentTheme.text} mb-3 ${currentTheme.font}`}>
                                {theme === 'tron' ? '> DRAWING_ORDER' : ' Drawing Order'}
                            </h3>
                            <div className="flex flex-wrap gap-2 md:gap-3">
                                {currentRoom?.players.map((player, idx) => {
                                    const character = availableCharacters.find(c => c.id === player.avatar) || availableCharacters[0];
                                    const isCurrentDrawer = isDrawer && player.name === playerName;
                                    const orderNumber = idx + 1;
                                    return (
                                        <div 
                                            key={idx}
                                            className={`${isCurrentDrawer ? (theme === 'tron' ? 'bg-cyan-500/30 border-2 border-cyan-400 ring-2 ring-cyan-400 scale-110' : theme === 'kids' ? 'bg-yellow-200 border-2 border-yellow-500 ring-2 ring-yellow-400 scale-110' : 'bg-orange-600/40 border-2 border-orange-500 ring-2 ring-orange-400 scale-110') : (theme === 'tron' ? 'bg-cyan-500/10 border border-cyan-500/30' : theme === 'kids' ? 'bg-purple-100 border-2 border-purple-300' : 'bg-orange-900/20 border border-orange-700/50')} rounded-lg p-2 flex items-center gap-2 transition-all relative`}
                                        >
                                            {/* Order Number Badge */}
                                            <div className={`absolute -top-2 -left-2 w-5 h-5 md:w-6 md:h-6 rounded-full ${isCurrentDrawer ? (theme === 'tron' ? 'bg-cyan-400 text-black' : theme === 'kids' ? 'bg-yellow-500 text-white' : 'bg-orange-500 text-white') : (theme === 'tron' ? 'bg-gray-700 text-cyan-400' : theme === 'kids' ? 'bg-purple-400 text-white' : 'bg-gray-800 text-orange-400')} font-bold text-xs flex items-center justify-center`}>
                                                {orderNumber}
                                            </div>
                                            
                                            <div className="w-10 h-10 md:w-12 md:h-12">
                                                <CharacterSVG characterId={player.avatar} size={48} color={character.color} />
                                            </div>
                                            <div className="flex-1 min-w-0">
                                                <div className={`font-bold text-xs md:text-sm ${currentTheme.text} truncate`}>{player.name}</div>
                                                {isCurrentDrawer && (
                                                    <div className={`text-[0.6rem] md:text-xs ${theme === 'tron' ? 'text-cyan-300' : theme === 'kids' ? 'text-yellow-700' : 'text-orange-400'} font-semibold`}>
                                                         Drawing Now
                                                    </div>
                                                )}
                                                {!isCurrentDrawer && (
                                                    <div className={`text-[0.6rem] md:text-xs ${currentTheme.textSecondary}`}>
                                                        {orderNumber === 1 && isDrawer ? 'Next' : `#${orderNumber}`}
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Main App Component
        function GameRoomApp() {
            const [page, setPage] = useState('landing');
            const [showCreateInput, setShowCreateInput] = useState(false);
            const [showJoinInput, setShowJoinInput] = useState(false);
            const [roomName, setRoomName] = useState('Test Game Room');
            const [joinRoomId, setJoinRoomId] = useState('XU1V2');
            const [playerName, setPlayerName] = useState('Player');
            const [currentRoom, setCurrentRoom] = useState(null);
            const [isMaster, setIsMaster] = useState(false);
            const [showGameSelector, setShowGameSelector] = useState(false);
            const [selectedGames, setSelectedGames] = useState([]);
            const [countdown, setCountdown] = useState(3);
            const [currentGameIndex, setCurrentGameIndex] = useState(0);
            const [error, setError] = useState('');
            const [showMenu, setShowMenu] = useState(false);
            const [theme, setTheme] = useState('tron'); // 'tron', 'kids', or 'scary'
            const [isMuted, setIsMuted] = useState(false);
            const [numPlayers, setNumPlayers] = useState('');
            const [ageRange, setAgeRange] = useState('');
            const [minAge, setMinAge] = useState(5);
            const [maxAge, setMaxAge] = useState(18);
            const [minPlayers, setMinPlayers] = useState(1);
            const [maxPlayers, setMaxPlayers] = useState(16);
            const [sortBy, setSortBy] = useState('popular');
            const [selectedGameInfo, setSelectedGameInfo] = useState(null);
            const [selectedGameDesc, setSelectedGameDesc] = useState(null);
            const [qrExpanded, setQrExpanded] = useState(false);
            const [selectedAvatar, setSelectedAvatar] = useState('cyber-knight');
            const [showAvatarPicker, setShowAvatarPicker] = useState(false);
            const audioRef = useRef(null);

            // Themed character avatars
            const characterAvatars = {
                tron: [
                    { id: 'cyber-knight', name: 'Cyber Knight', emoji: '', color: '#06b6d4' },
                    { id: 'neon-ninja', name: 'Neon Ninja', emoji: '', color: '#3b82f6' },
                    { id: 'data-runner', name: 'Data Runner', emoji: '', color: '#8b5cf6' },
                    { id: 'circuit-breaker', name: 'Circuit Breaker', emoji: '', color: '#06b6d4' },
                    { id: 'byte-fighter', name: 'Byte Fighter', emoji: '', color: '#0ea5e9' },
                    { id: 'pixel-warrior', name: 'Pixel Warrior', emoji: '', color: '#6366f1' },
                    { id: 'tech-ghost', name: 'Tech Ghost', emoji: '', color: '#22d3ee' },
                    { id: 'cyber-samurai', name: 'Cyber Samurai', emoji: '', color: '#3b82f6' },
                    { id: 'grid-master', name: 'Grid Master', emoji: '', color: '#06b6d4' },
                    { id: 'binary-ace', name: 'Binary Ace', emoji: '', color: '#0891b2' }
                ],
                kids: [
                    { id: 'happy-unicorn', name: 'Happy Unicorn', emoji: '', color: '#ec4899' },
                    { id: 'cool-fox', name: 'Cool Fox', emoji: '', color: '#f97316' },
                    { id: 'brave-lion', name: 'Brave Lion', emoji: '', color: '#eab308' },
                    { id: 'smart-panda', name: 'Smart Panda', emoji: '', color: '#6b7280' },
                    { id: 'silly-frog', name: 'Silly Frog', emoji: '', color: '#22c55e' },
                    { id: 'speedy-rabbit', name: 'Speedy Rabbit', emoji: '', color: '#a855f7' },
                    { id: 'friendly-bear', name: 'Friendly Bear', emoji: '', color: '#92400e' },
                    { id: 'magical-cat', name: 'Magical Cat', emoji: '', color: '#8b5cf6' },
                    { id: 'happy-penguin', name: 'Happy Penguin', emoji: '', color: '#0ea5e9' },
                    { id: 'rainbow-koala', name: 'Rainbow Koala', emoji: '', color: '#d946ef' }
                ],
                scary: [
                    { id: 'vampire-lord', name: 'Vampire Lord', emoji: '', color: '#dc2626' },
                    { id: 'howling-wolf', name: 'Howling Wolf', emoji: '', color: '#9333ea' },
                    { id: 'ghost-haunter', name: 'Ghost Haunter', emoji: '', color: '#6b7280' },
                    { id: 'zombie-king', name: 'Zombie King', emoji: '', color: '#65a30d' },
                    { id: 'witch-mage', name: 'Witch Mage', emoji: '', color: '#7c3aed' },
                    { id: 'skeleton-warrior', name: 'Skeleton Warrior', emoji: '', color: '#f5f5f5' },
                    { id: 'demon-hunter', name: 'Demon Hunter', emoji: '', color: '#b91c1c' },
                    { id: 'dark-wizard', name: 'Dark Wizard', emoji: '', color: '#581c87' },
                    { id: 'shadow-reaper', name: 'Shadow Reaper', emoji: '', color: '#1f2937' },
                    { id: 'cursed-mummy', name: 'Cursed Mummy', emoji: '', color: '#ca8a04' }
                ]
            };

            const availableCharacters = characterAvatars[theme] || characterAvatars.tron;
            const takenCharacters = currentRoom?.players.map(p => p.avatar) || [];

            // Pre-created dummy room for development
            const dummyRoom = {
                id: 'XU1V2',
                name: "Anderson's Game Room",
                master: 'Anderson',
                players: [
                    { name: 'Anderson', isMaster: true, avatar: '' },
                    { name: 'Sarah', isMaster: false, avatar: '' },
                    { name: 'Mike', isMaster: false, avatar: '' },
                    { name: 'Emma', isMaster: false, avatar: '' }
                ],
                selectedGames: [1, 5, 9], // Trivia Master, Quick Math, Music Quiz
            };

            // Theme configurations
            const themes = {
                tron: {
                    bg: 'bg-black',
                    gradientFrom: 'from-black',
                    gradientVia: 'via-gray-900',
                    gradientTo: 'to-black',
                    text: 'text-cyan-400',
                    textSecondary: 'text-cyan-300',
                    accent: 'bg-cyan-500',
                    accentHover: 'hover:bg-cyan-400',
                    border: 'border-cyan-400',
                    glow: 'tron-glow',
                    font: 'font-orbitron',
                    cardBg: 'bg-gray-900/90',
                    headerBg: 'bg-black/90'
                },
                kids: {
                    bg: 'bg-gradient-to-br from-pink-300 via-purple-300 to-blue-300',
                    gradientFrom: 'from-pink-400',
                    gradientVia: 'via-purple-400',
                    gradientTo: 'to-blue-400',
                    text: 'text-purple-800',
                    textSecondary: 'text-purple-600',
                    accent: 'bg-pink-500',
                    accentHover: 'hover:bg-pink-400',
                    border: 'border-purple-400',
                    glow: 'kids-shadow',
                    font: 'font-quicksand',
                    cardBg: 'bg-white/90',
                    headerBg: 'bg-white/80'
                },
                scary: {
                    bg: 'bg-black',
                    gradientFrom: 'from-gray-900',
                    gradientVia: 'via-orange-950',
                    gradientTo: 'to-black',
                    text: 'text-orange-500',
                    textSecondary: 'text-orange-600',
                    accent: 'bg-orange-700',
                    accentHover: 'hover:bg-orange-600',
                    border: 'border-orange-700',
                    glow: 'shadow-[0_0_20px_rgba(194,65,12,0.6)]',
                    font: 'font-orbitron',
                    cardBg: 'bg-gray-950/95',
                    headerBg: 'bg-black/95'
                }
            };

            const currentTheme = themes[theme];

            useEffect(() => {
                socket.on('roomCreated', (room) => {
                    setCurrentRoom(room);
                    setIsMaster(true);
                    setSelectedGames(room.selectedGames || []);
                    setPage('room');
                    setShowCreateInput(false);
                    setShowAvatarPicker(false);
                    if (audioRef.current) {
                        audioRef.current.play();
                    }
                });

                socket.on('roomJoined', (room) => {
                    setCurrentRoom(room);
                    setIsMaster(false);
                    setSelectedGames(room.selectedGames || []);
                    setPage('room');
                    setShowJoinInput(false);
                    setShowAvatarPicker(false);
                });

                socket.on('playerJoined', (data) => {
                    if (currentRoom && currentRoom.id === data.roomId) {
                        setCurrentRoom(prev => ({
                            ...prev,
                            players: [...prev.players, { name: data.player, isMaster: false, avatar: data.avatar }]
                        }));
                    }
                });

                socket.on('gamesUpdated', (data) => {
                    if (currentRoom && currentRoom.id === data.roomId) {
                        setSelectedGames(data.selectedGames);
                    }
                });

                socket.on('gameStarting', (data) => {
                    if (currentRoom && currentRoom.id === data.roomId) {
                        setPage('countdown');
                        let count = 3;
                        const timer = setInterval(() => {
                            count--;
                            setCountdown(count);
                            if (count === 0) {
                                clearInterval(timer);
                                setPage('game');
                            }
                        }, 1000);
                    }
                });

                socket.on('error', (data) => {
                    setError(data.message);
                    setTimeout(() => setError(''), 3000);
                });
            }, [currentRoom]);

            const handleCreateRoom = () => {
                if (roomName.trim() && playerName.trim()) {
                    socket.emit('createRoom', { roomName, playerName });
                }
            };

            const handleJoinRoom = () => {
                if (joinRoomId.trim() && playerName.trim()) {
                    // Show avatar picker instead of immediately joining
                    setShowAvatarPicker(true);
                }
            };

            const confirmJoinWithAvatar = () => {
                socket.emit('joinRoom', { roomId: joinRoomId.toUpperCase(), playerName, avatar: selectedAvatar });
            };

            const toggleGame = (gameId) => {
                socket.emit('toggleGame', { roomId: currentRoom.id, gameId });
                setSelectedGames(prev => 
                    prev.includes(gameId) 
                        ? prev.filter(id => id !== gameId)
                        : [...prev, gameId]
                );
            };

            const startGame = () => {
                if (selectedGames.length > 0) {
                    socket.emit('startGame', { roomId: currentRoom.id });
                }
            };

            const goToLanding = () => {
                setPage('landing');
                setCurrentRoom(null);
                setIsMaster(false);
                setShowMenu(false);
                setShowCreateInput(false);
                setShowJoinInput(false);
                setSelectedGames([]);
                if (audioRef.current) {
                    audioRef.current.pause();
                    audioRef.current.currentTime = 0;
                }
            };

            const toggleTheme = () => {
                setTheme(prev => {
                    if (prev === 'tron') return 'kids';
                    if (prev === 'kids') return 'scary';
                    return 'tron';
                });
            };

            const StarRating = ({ rating }) => {
                const stars = [];
                for (let i = 1; i <= 5; i++) {
                    stars.push(
                        <Star key={i} className="star inline" filled={i <= Math.floor(rating)} />
                    );
                }
                return <div className="flex items-center gap-1">{stars} <span className="text-xs ml-1">{rating}</span></div>;
            };

            // Header Component
            const Header = () => (
                <header className={`fixed top-0 left-0 right-0 z-50 ${currentTheme.headerBg} backdrop-blur-lg ${theme === 'tron' ? 'border-b border-cyan-500/30' : 'border-b-4 border-purple-300'}`}>
                    <div className="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
                        <button 
                            onClick={goToLanding}
                            className="flex items-center gap-3 hover:opacity-80 transition-opacity group"
                        >
                            <div className={`hidden md:block w-16 h-16 ${theme === 'tron' ? 'bg-cyan-500/20 tron-border' : theme === 'kids' ? 'bg-gradient-to-br from-pink-400 to-purple-500 kids-shadow' : 'bg-orange-900/40 border-2 border-orange-700'} rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform p-2`}>
                                {theme === 'tron' ? (
                                    <DaftPunkRobotHead className={`w-full h-full text-cyan-400`} />
                                ) : theme === 'kids' ? (
                                    <DaftPunkHelmet className={`w-full h-full text-white`} />
                                ) : (
                                    <WerewolfHowlingIcon className={`w-full h-full text-orange-500`} />
                                )}
                            </div>
                            <span className={`${currentTheme.text} font-bold text-xl md:text-2xl ${currentTheme.font} ${theme === 'tron' ? 'tron-text-glow' : ''}`}>
                                GameHub
                            </span>
                        </button>

                        <div className="flex items-center gap-2">
                            {/* Theme Dropdown - Icon Only with themed background */}
                            <div className="relative">
                                <select
                                    value={theme}
                                    onChange={(e) => setTheme(e.target.value)}
                                    className={`appearance-none w-10 h-10 md:w-12 md:h-12 ${theme === 'tron' ? 'bg-cyan-500/20 text-cyan-400 tron-border' : theme === 'kids' ? 'bg-purple-500 text-white' : 'bg-orange-700/40 text-orange-400 border-2 border-orange-700'} rounded-xl font-semibold transition-all hover:scale-105 cursor-pointer focus:outline-none focus:ring-2 ${theme === 'tron' ? 'focus:ring-cyan-400' : theme === 'kids' ? 'focus:ring-purple-400' : 'focus:ring-orange-500'} text-transparent`}
                                >
                                    <option value="tron" className={`${theme === 'tron' ? 'bg-gray-900 text-cyan-400' : theme === 'kids' ? 'bg-purple-100 text-purple-900' : 'bg-gray-900 text-orange-400'}`}>T</option>
                                    <option value="kids" className={`${theme === 'tron' ? 'bg-gray-900 text-cyan-400' : theme === 'kids' ? 'bg-purple-100 text-purple-900' : 'bg-gray-900 text-orange-400'}`}>K</option>
                                    <option value="scary" className={`${theme === 'tron' ? 'bg-gray-900 text-cyan-400' : theme === 'kids' ? 'bg-purple-100 text-purple-900' : 'bg-gray-900 text-orange-400'}`}>S</option>
                                </select>
                                {/* Palette Icon Overlay */}
                                <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                                    <Palette className="w-5 h-5 md:w-6 md:h-6" />
                                </div>
                            </div>

                            {/* Mute Button */}
                            <button
                                onClick={() => setIsMuted(!isMuted)}
                                className={`w-10 h-10 md:w-12 md:h-12 ${theme === 'tron' ? 'bg-cyan-500/20 tron-border text-cyan-400' : theme === 'kids' ? 'bg-purple-500 text-white' : 'bg-orange-700/40 text-orange-400 border-2 border-orange-700'} rounded-xl flex items-center justify-center transition-all hover:scale-105`}
                                title={isMuted ? 'Unmute' : 'Mute'}
                            >
                                {isMuted ? (
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                        <line x1="23" y1="9" x2="17" y2="15"></line>
                                        <line x1="17" y1="9" x2="23" y2="15"></line>
                                    </svg>
                                ) : (
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                        <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
                                        <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                                    </svg>
                                )}
                            </button>
                            
                            <button
                                onClick={() => setShowMenu(!showMenu)}
                                className={`w-10 h-10 md:w-12 md:h-12 ${theme === 'tron' ? 'bg-cyan-500/20 tron-border text-cyan-400' : theme === 'kids' ? 'bg-purple-500 text-white' : 'bg-orange-700/40 text-orange-400 border-2 border-orange-700'} rounded-xl flex items-center justify-center transition-all hover:scale-105`}
                            >
                                <Menu className="w-5 h-5 md:w-6 md:h-6" />
                            </button>
                        </div>
                    </div>

                    {showMenu && (
                        <div className={`absolute top-full right-4 mt-2 w-64 ${currentTheme.cardBg} backdrop-blur-xl rounded-2xl ${theme === 'tron' ? 'tron-border' : 'border-4 border-purple-300'} shadow-2xl overflow-hidden`}>
                            <div className="p-2">
                                <button
                                    onClick={goToLanding}
                                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-white/10 ${currentTheme.text} transition-all group`}
                                >
                                    <Home className="w-5 h-5 group-hover:scale-110 transition-transform" />
                                    <span className="font-medium">Home</span>
                                </button>
                                
                                <button
                                    onClick={() => setShowMenu(false)}
                                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-white/10 ${currentTheme.text} transition-all group`}
                                >
                                    <User className="w-5 h-5 group-hover:scale-110 transition-transform" />
                                    <span className="font-medium">Profile</span>
                                </button>

                                <button
                                    onClick={() => setShowMenu(false)}
                                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-white/10 ${currentTheme.text} transition-all group`}
                                >
                                    <Settings className="w-5 h-5 group-hover:scale-110 transition-transform" />
                                    <span className="font-medium">Settings</span>
                                </button>

                                <button
                                    onClick={() => setShowMenu(false)}
                                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-white/10 ${currentTheme.text} transition-all group`}
                                >
                                    <HelpCircle className="w-5 h-5 group-hover:scale-110 transition-transform" />
                                    <span className="font-medium">Help & Support</span>
                                </button>

                                <div className={`my-2 border-t ${theme === 'tron' ? 'border-cyan-500/30' : 'border-purple-300'}`}></div>

                                <button
                                    onClick={() => setShowMenu(false)}
                                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl ${theme === 'tron' ? 'hover:bg-red-500/20 text-red-400' : 'hover:bg-red-200 text-red-600'} transition-all group`}
                                >
                                    <LogOut className="w-5 h-5 group-hover:scale-110 transition-transform" />
                                    <span className="font-medium">Log Out</span>
                                </button>
                            </div>
                        </div>
                    )}
                </header>
            );

            // Landing Page
            if (page === 'landing') {
                return (
                    <>
                        <Header />
                        <div className={`min-h-screen ${theme === 'tron' ? 'bg-black tron-grid' : theme === 'kids' ? 'bg-gradient-to-br from-pink-200 via-purple-200 to-blue-200' : 'bg-gradient-to-br from-gray-900 via-orange-950 to-black'} flex flex-col items-center justify-center p-4 pt-28`}>
                            <div className="relative max-w-7xl w-full">
                                <div className={`text-center mb-8 md:mb-12`}>
                                    <div className={`inline-block p-4 md:p-6 ${theme === 'tron' ? 'bg-cyan-500/10 tron-border' : theme === 'kids' ? 'bg-white kids-shadow' : 'bg-orange-900/40 border-4 border-orange-700'} rounded-2xl md:rounded-3xl mb-4 md:mb-6 ${theme === 'kids' ? 'kids-icon-float' : ''}`}>
                                        {theme === 'tron' ? (
                                            <DaftPunkRobotHead className={`w-16 h-16 md:w-24 md:h-24 text-cyan-400`} />
                                        ) : theme === 'kids' ? (
                                            <DaftPunkHelmet className={`w-16 h-16 md:w-24 md:h-24 text-purple-600`} />
                                        ) : (
                                            <WerewolfHowlingIcon className={`w-16 h-16 md:w-24 md:h-24 text-orange-500`} />
                                        )}
                                    </div>
                                    <h1 className={`text-5xl md:text-7xl font-black ${currentTheme.text} mb-2 md:mb-3 tracking-tight ${currentTheme.font} ${theme === 'tron' ? 'tron-text-glow' : ''}`} style={theme === 'tron' ? { animation: 'softPulse 3s ease-in-out infinite' } : {}}>
                                        GameHub
                                    </h1>
                                    <p className={`${currentTheme.textSecondary} text-lg md:text-xl font-light mb-6`}>
                                        {theme === 'tron' ? 'Connect. Compete. Conquer.' : theme === 'kids' ? 'Play Together, Have Fun! ' : 'Enter If You Dare... '}
                                    </p>
                                    
                                    {/* Quick Test Button for Development */}
                                    <button
                                        onClick={() => {
                                            // Set up minimal test room
                                            const testRoom = {
                                                id: 'TEST123',
                                                name: 'Quick Test Room',
                                                master: 'You',
                                                players: [
                                                    { name: 'You', isMaster: true, avatar: 'cyber-knight' },
                                                    { name: 'Sarah', isMaster: false, avatar: 'neon-ninja' },
                                                    { name: 'Mike', isMaster: false, avatar: 'data-runner' },
                                                    { name: 'Emma', isMaster: false, avatar: 'circuit-breaker' }
                                                ],
                                                selectedGames: [1]
                                            };
                                            setCurrentRoom(testRoom);
                                            setIsMaster(true);
                                            setPlayerName('You');
                                            setSelectedAvatar('cyber-knight');
                                            setPage('game');
                                        }}
                                        className={`${theme === 'tron' ? 'bg-green-500/90 hover:bg-green-400 text-black tron-glow' : theme === 'kids' ? 'bg-gradient-to-r from-green-400 to-emerald-500 hover:from-green-300 hover:to-emerald-400 text-white kids-shadow' : 'bg-green-700 hover:bg-green-600 text-white shadow-[0_0_20px_rgba(34,197,94,0.5)]'} font-bold py-3 px-8 rounded-2xl transition-all duration-300 hover:scale-105 shadow-xl text-base md:text-lg ${currentTheme.font}`}
                                    >
                                         Quick Test - Jump to Pictionary
                                    </button>
                                </div>

                                {error && (
                                    <div className={`mb-4 p-4 ${theme === 'tron' ? 'bg-red-500/20 border border-red-400' : 'bg-red-200 border-4 border-red-400'} rounded-2xl ${currentTheme.text} text-center`}>
                                        {error}
                                    </div>
                                )}

                                <div className="space-y-4 mb-12">
                                    {!showCreateInput && !showJoinInput && (
                                        <>
                                            <button
                                                onClick={() => setShowCreateInput(true)}
                                                className={`w-full ${theme === 'tron' ? 'bg-cyan-500/90 hover:bg-cyan-400 text-black tron-glow' : 'bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-400 hover:to-purple-400 text-white kids-shadow'} font-bold py-6 px-8 rounded-2xl transition-all duration-300 hover:scale-105 group ${currentTheme.font}`}
                                            >
                                                <div className="flex items-center justify-center gap-3">
                                                    <Crown className="w-7 h-7 group-hover:rotate-12 transition-transform" />
                                                    <span className="text-2xl">Create Game Room</span>
                                                </div>
                                            </button>

                                            <button
                                                onClick={() => setShowJoinInput(true)}
                                                className={`w-full ${theme === 'tron' ? 'bg-gray-900 hover:bg-gray-800 text-cyan-400 tron-border' : 'bg-white hover:bg-purple-50 text-purple-600 border-4 border-purple-400 kids-shadow'} font-bold py-6 px-8 rounded-2xl transition-all duration-300 hover:scale-105 group ${currentTheme.font}`}
                                            >
                                                <div className="flex items-center justify-center gap-3">
                                                    <Users className="w-7 h-7 group-hover:scale-110 transition-transform" />
                                                    <span className="text-2xl">Join Existing Room</span>
                                                </div>
                                            </button>
                                        </>
                                    )}

                                    {showCreateInput && (
                                        <div className={`${currentTheme.cardBg} backdrop-blur-lg p-6 rounded-2xl ${theme === 'tron' ? 'tron-border' : 'border-4 border-purple-300'}`}>
                                            <input
                                                type="text"
                                                placeholder="Type a name for your game room (e.g., Anderson's Game Room)"
                                                value={roomName}
                                                onChange={(e) => setRoomName(e.target.value)}
                                                className={`w-full px-4 py-3 mb-3 rounded-xl ${theme === 'tron' ? 'bg-black text-cyan-400 border border-cyan-500 placeholder-cyan-600' : 'bg-white text-purple-900 border-2 border-purple-300 placeholder-purple-400'} focus:outline-none focus:ring-2 ${theme === 'tron' ? 'focus:ring-cyan-400' : 'focus:ring-purple-500'}`}
                                            />
                                            <input
                                                type="text"
                                                placeholder="Your name"
                                                value={playerName}
                                                onChange={(e) => setPlayerName(e.target.value)}
                                                className={`w-full px-4 py-3 mb-4 rounded-xl ${theme === 'tron' ? 'bg-black text-cyan-400 border border-cyan-500 placeholder-cyan-600' : 'bg-white text-purple-900 border-2 border-purple-300 placeholder-purple-400'} focus:outline-none focus:ring-2 ${theme === 'tron' ? 'focus:ring-cyan-400' : 'focus:ring-purple-500'}`}
                                            />
                                            <div className="flex gap-2">
                                                <button
                                                    onClick={handleCreateRoom}
                                                    className={`flex-1 ${theme === 'tron' ? 'bg-green-500 hover:bg-green-400' : 'bg-green-400 hover:bg-green-300'} text-white font-bold py-3 rounded-xl transition-all`}
                                                >
                                                    Create
                                                </button>
                                                <button
                                                    onClick={() => setShowCreateInput(false)}
                                                    className={`px-6 ${theme === 'tron' ? 'bg-gray-800 hover:bg-gray-700 text-cyan-400' : 'bg-purple-200 hover:bg-purple-300 text-purple-900'} font-bold py-3 rounded-xl transition-all`}
                                                >
                                                    Cancel
                                                </button>
                                            </div>
                                        </div>
                                    )}

                                    {showJoinInput && (
                                        <div className={`${currentTheme.cardBg} backdrop-blur-lg p-6 rounded-2xl ${theme === 'tron' ? 'tron-border' : 'border-4 border-purple-300'}`}>
                                            <input
                                                type="text"
                                                placeholder="Enter Game Room ID"
                                                value={joinRoomId}
                                                onChange={(e) => setJoinRoomId(e.target.value.toUpperCase())}
                                                className={`w-full px-4 py-3 mb-3 rounded-xl ${theme === 'tron' ? 'bg-black text-cyan-400 border border-cyan-500 placeholder-cyan-600' : 'bg-white text-purple-900 border-2 border-purple-300 placeholder-purple-400'} focus:outline-none focus:ring-2 ${theme === 'tron' ? 'focus:ring-cyan-400' : 'focus:ring-purple-500'} uppercase`}
                                            />
                                            <input
                                                type="text"
                                                placeholder="Your name"
                                                value={playerName}
                                                onChange={(e) => setPlayerName(e.target.value)}
                                                className={`w-full px-4 py-3 mb-4 rounded-xl ${theme === 'tron' ? 'bg-black text-cyan-400 border border-cyan-500 placeholder-cyan-600' : 'bg-white text-purple-900 border-2 border-purple-300 placeholder-purple-400'} focus:outline-none focus:ring-2 ${theme === 'tron' ? 'focus:ring-cyan-400' : 'focus:ring-purple-500'}`}
                                            />
                                            <div className="flex gap-2">
                                                <button
                                                    onClick={handleJoinRoom}
                                                    className={`flex-1 ${theme === 'tron' ? 'bg-blue-500 hover:bg-blue-400' : 'bg-blue-400 hover:bg-blue-300'} text-white font-bold py-3 rounded-xl transition-all`}
                                                >
                                                    Join
                                                </button>
                                                <button
                                                    onClick={() => setShowJoinInput(false)}
                                                    className={`px-6 ${theme === 'tron' ? 'bg-gray-800 hover:bg-gray-700 text-cyan-400' : 'bg-purple-200 hover:bg-purple-300 text-purple-900'} font-bold py-3 rounded-xl transition-all`}
                                                >
                                                    Cancel
                                                </button>
                                            </div>
                                        </div>
                                    )}
                                </div>

                                {/* Avatar Picker Modal */}
                                {showAvatarPicker && (
                                    <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50">
                                        <div className={`${currentTheme.cardBg} backdrop-blur-lg rounded-3xl max-w-4xl w-full max-h-[90vh] flex flex-col ${theme === 'tron' ? 'tron-border' : theme === 'kids' ? 'border-4 border-purple-300' : 'border-4 border-orange-600'}`}>
                                            {/* Fixed Header */}
                                            <div className="p-6 md:p-8 pb-4">
                                                <h2 className={`text-2xl md:text-3xl font-bold ${currentTheme.text} mb-2 text-center ${currentTheme.font}`}>
                                                    {theme === 'tron' ? 'SELECT_CHARACTER' : theme === 'kids' ? 'Choose Your Character!' : 'SUMMON YOUR AVATAR'}
                                                </h2>
                                                <p className={`${currentTheme.textSecondary} text-center text-sm md:text-base`}>
                                                    {theme === 'scary' ? 'Choose wisely... others cannot take your form' : 'Pick a character - each is unique to you!'}
                                                </p>
                                            </div>
                                            
                                            {/* Scrollable Character Grid */}
                                            <div className={`flex-1 overflow-y-auto px-6 md:px-8 ${theme === 'tron' ? 'scrollbar-tron' : theme === 'kids' ? 'scrollbar-kids' : 'scrollbar-scary'}`}>
                                                <div className="grid grid-cols-2 md:grid-cols-5 gap-3 pb-4">
                                                    {availableCharacters.map((character) => {
                                                        const isTaken = takenCharacters.includes(character.id);
                                                        return (
                                                            <button
                                                                key={character.id}
                                                                onClick={() => !isTaken && setSelectedAvatar(character.id)}
                                                                disabled={isTaken}
                                                                className={`relative p-4 rounded-xl transition-all ${
                                                                    isTaken 
                                                                        ? 'opacity-30 cursor-not-allowed bg-gray-800/30 grayscale'
                                                                        : selectedAvatar === character.id 
                                                                            ? theme === 'tron' 
                                                                                ? 'bg-cyan-500/30 tron-border scale-105 ring-4 ring-cyan-400' 
                                                                                : theme === 'kids'
                                                                                    ? 'bg-purple-300 border-4 border-purple-500 scale-105'
                                                                                    : 'bg-orange-700/30 border-4 border-orange-600 scale-105 shadow-[0_0_20px_rgba(194,65,12,0.6)]'
                                                                            : theme === 'tron'
                                                                                ? 'bg-gray-800/50 border border-cyan-500/30 hover:bg-gray-700/50 hover:scale-105'
                                                                                : theme === 'kids'
                                                                                    ? 'bg-purple-100 border-2 border-purple-300 hover:bg-purple-200 hover:scale-105'
                                                                                    : 'bg-gray-900/50 border border-orange-700/50 hover:bg-gray-800/50 hover:scale-105'
                                                                }`}
                                                            >
                                                                <div className="mb-1">
                                                                    <CharacterSVG characterId={character.id} size={60} color={character.color} />
                                                                </div>
                                                                <div className={`text-xs font-semibold text-center ${isTaken ? 'text-gray-600' : currentTheme.text}`}>
                                                                    {character.name}
                                                                    {isTaken && <div className="text-[0.6rem] text-gray-500 mt-1">Taken</div>}
                                                                </div>
                                                            </button>
                                                        );
                                                    })}
                                                </div>
                                            </div>
                                            
                                            {/* Fixed Footer */}
                                            <div className="p-6 md:p-8 pt-4 flex gap-3">
                                                <button
                                                    onClick={confirmJoinWithAvatar}
                                                    className={`flex-1 ${theme === 'tron' ? 'bg-cyan-500 hover:bg-cyan-400 text-black' : theme === 'kids' ? 'bg-purple-500 hover:bg-purple-400 text-white' : 'bg-orange-700 hover:bg-orange-600 text-white'} font-bold py-3 rounded-xl transition-all`}
                                                >
                                                    {theme === 'scary' ? 'Enter the Darkness' : 'Join Game'}
                                                </button>
                                                <button
                                                    onClick={() => setShowAvatarPicker(false)}
                                                    className={`px-6 ${theme === 'tron' ? 'bg-gray-800 hover:bg-gray-700 text-cyan-400' : theme === 'kids' ? 'bg-purple-200 hover:bg-purple-300 text-purple-900' : 'bg-gray-800 hover:bg-gray-700 text-orange-400'} font-bold py-3 rounded-xl transition-all`}
                                                >
                                                    Cancel
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* How It Works Section */}
                                <div className={`${currentTheme.cardBg} backdrop-blur-lg p-4 md:p-8 rounded-3xl ${theme === 'tron' ? 'tron-border' : 'border-4 border-purple-300'} mb-8 md:mb-12`}>
                                    <h2 className={`text-2xl md:text-3xl font-bold ${currentTheme.text} mb-4 md:mb-8 text-center ${currentTheme.font}`}>
                                        {theme === 'tron' ? '> SYSTEM_PROTOCOL' : theme === 'kids' ? 'How It Works ' : 'THE RITUAL '}
                                    </h2>
                                    
                                    <div className="grid grid-cols-4 gap-2 md:gap-6">
                                        <div className="text-center">
                                            <div className={`w-12 h-12 md:w-20 md:h-20 mx-auto mb-2 md:mb-4 ${theme === 'tron' ? 'bg-cyan-500/20 tron-border' : 'bg-purple-200 border-2 md:border-4 border-purple-400'} rounded-xl md:rounded-2xl flex items-center justify-center ${theme === 'kids' ? 'kids-bubble' : ''}`}>
                                                <Crown className={`w-6 h-6 md:w-10 md:h-10 ${currentTheme.text}`} />
                                            </div>
                                            <h3 className={`text-xs md:text-lg font-bold ${currentTheme.text} mb-1 md:mb-2 ${currentTheme.font}`}>
                                                1. Create
                                            </h3>
                                            <p className={`${currentTheme.textSecondary} text-[0.65rem] md:text-sm hidden md:block`}>
                                                {theme === 'tron' ? 'Set up your game room' : 'Set up your game room in seconds'}
                                            </p>
                                        </div>
                                        
                                        <div className="text-center">
                                            <div className={`w-12 h-12 md:w-20 md:h-20 mx-auto mb-2 md:mb-4 ${theme === 'tron' ? 'bg-cyan-500/20 tron-border' : 'bg-purple-200 border-2 md:border-4 border-purple-400'} rounded-xl md:rounded-2xl flex items-center justify-center ${theme === 'kids' ? 'kids-bubble' : ''}`} style={{ animationDelay: '0.2s' }}>
                                                <Users className={`w-6 h-6 md:w-10 md:h-10 ${currentTheme.text}`} />
                                            </div>
                                            <h3 className={`text-xs md:text-lg font-bold ${currentTheme.text} mb-1 md:mb-2 ${currentTheme.font}`}>
                                                2. Join
                                            </h3>
                                            <p className={`${currentTheme.textSecondary} text-[0.65rem] md:text-sm hidden md:block`}>
                                                {theme === 'tron' ? 'Share room code or QR' : 'Share the code or QR code'}
                                            </p>
                                        </div>
                                        
                                        <div className="text-center">
                                            <div className={`w-12 h-12 md:w-20 md:h-20 mx-auto mb-2 md:mb-4 ${theme === 'tron' ? 'bg-cyan-500/20 tron-border' : 'bg-purple-200 border-2 md:border-4 border-purple-400'} rounded-xl md:rounded-2xl flex items-center justify-center ${theme === 'kids' ? 'kids-bubble' : ''}`} style={{ animationDelay: '0.4s' }}>
                                                <Gamepad2 className={`w-6 h-6 md:w-10 md:h-10 ${currentTheme.text}`} strokeWidth={2} />
                                            </div>
                                            <h3 className={`text-xs md:text-lg font-bold ${currentTheme.text} mb-1 md:mb-2 ${currentTheme.font}`}>
                                                3. Select
                                            </h3>
                                            <p className={`${currentTheme.textSecondary} text-[0.65rem] md:text-sm hidden md:block`}>
                                                {theme === 'tron' ? 'Choose games to play' : 'Pick your favorite games'}
                                            </p>
                                        </div>
                                        
                                        <div className="text-center">
                                            <div className={`w-12 h-12 md:w-20 md:h-20 mx-auto mb-2 md:mb-4 ${theme === 'tron' ? 'bg-cyan-500/20 tron-border' : 'bg-purple-200 border-2 md:border-4 border-purple-400'} rounded-xl md:rounded-2xl flex items-center justify-center ${theme === 'kids' ? 'kids-bubble' : ''}`} style={{ animationDelay: '0.6s' }}>
                                                <Play className={`w-6 h-6 md:w-10 md:h-10 ${currentTheme.text}`} />
                                            </div>
                                            <h3 className={`text-xs md:text-lg font-bold ${currentTheme.text} mb-1 md:mb-2 ${currentTheme.font}`}>
                                                4. Play
                                            </h3>
                                            <p className={`${currentTheme.textSecondary} text-[0.65rem] md:text-sm hidden md:block`}>
                                                {theme === 'tron' ? 'Game begins!' : 'Have fun together!'}
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                {/* Explore Games Section */}
                                <div className={`${currentTheme.cardBg} backdrop-blur-lg p-8 rounded-3xl ${theme === 'tron' ? 'tron-border' : 'border-4 border-purple-300'}`}>
                                    <h2 className={`text-3xl font-bold ${currentTheme.text} mb-6 text-center ${currentTheme.font}`}>
                                        {theme === 'tron' ? '> GAME_LIBRARY' : theme === 'kids' ? 'Explore Games ' : 'TORTURE CHAMBER '}
                                    </h2>
                                    
                                    {/* Filters */}
                                    <div className="grid md:grid-cols-3 gap-4 mb-8">
                                        <div>
                                            <label className={`block ${currentTheme.textSecondary} text-sm font-semibold mb-2`}>
                                                Players: {minPlayers === 1 && maxPlayers === 16 ? 'All' : `1-${maxPlayers}`}
                                            </label>
                                            <div className="relative pt-1">
                                                <input
                                                    type="range"
                                                    min="1"
                                                    max="16"
                                                    value={maxPlayers}
                                                    onChange={(e) => {
                                                        const val = parseInt(e.target.value);
                                                        setMinPlayers(1);
                                                        setMaxPlayers(val);
                                                    }}
                                                    className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                                                    style={{
                                                        background: theme === 'tron' 
                                                            ? `linear-gradient(to right, #06b6d4 0%, #06b6d4 ${(maxPlayers/16)*100}%, #1f2937 ${(maxPlayers/16)*100}%, #1f2937 100%)`
                                                            : `linear-gradient(to right, #a855f7 0%, #a855f7 ${(maxPlayers/16)*100}%, #e9d5ff ${(maxPlayers/16)*100}%, #e9d5ff 100%)`
                                                    }}
                                                />
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <label className={`block ${currentTheme.textSecondary} text-sm font-semibold mb-2`}>
                                                Age: {minAge === 5 && maxAge === 18 ? 'All Ages' : `${minAge}+`}
                                            </label>
                                            <div className="relative pt-1">
                                                <input
                                                    type="range"
                                                    min="5"
                                                    max="18"
                                                    value={minAge}
                                                    onChange={(e) => {
                                                        const val = parseInt(e.target.value);
                                                        setMinAge(val);
                                                        setMaxAge(18);
                                                    }}
                                                    className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                                                    style={{
                                                        background: theme === 'tron'
                                                            ? `linear-gradient(to right, #1f2937 0%, #1f2937 ${((minAge-5)/13)*100}%, #06b6d4 ${((minAge-5)/13)*100}%, #06b6d4 100%)`
                                                            : `linear-gradient(to right, #e9d5ff 0%, #e9d5ff ${((minAge-5)/13)*100}%, #a855f7 ${((minAge-5)/13)*100}%, #a855f7 100%)`
                                                    }}
                                                />
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <label className={`block ${currentTheme.textSecondary} text-sm font-semibold mb-2`}>
                                                Sort By
                                            </label>
                                            <select
                                                value={sortBy}
                                                onChange={(e) => setSortBy(e.target.value)}
                                                className={`w-full px-4 py-2 rounded-lg ${theme === 'tron' ? 'bg-black text-cyan-400 border border-cyan-500' : 'bg-white text-purple-900 border-2 border-purple-300'} focus:outline-none focus:ring-2 ${theme === 'tron' ? 'focus:ring-cyan-400' : 'focus:ring-purple-500'}`}
                                            >
                                                <option value="popular">Most Popular</option>
                                                <option value="newest">Newest</option>
                                                <option value="rating">Highest Rated</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    {/* Game Library Grid - Fixed Height */}
                                    <div className={`h-[800px] lg:h-[500px] overflow-y-auto pr-2 ${theme === 'tron' ? 'scrollbar-tron' : theme === 'kids' ? 'scrollbar-kids' : 'scrollbar-scary'}`}>
                                        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
                                        {MOCK_GAMES
                                            .filter(game => {
                                                // Parse player range
                                                const playerParts = game.players.split('-');
                                                const gameMinPlayers = parseInt(playerParts[0]);
                                                const gameMaxPlayers = playerParts.length > 1 ? parseInt(playerParts[1]) : gameMinPlayers;
                                                
                                                // Check if game's player range is within filter
                                                const playersMatch = gameMinPlayers <= maxPlayers;
                                                
                                                // Check if game's minimum age is at or above filter minimum
                                                const ageMatch = game.ageMin >= minAge;
                                                
                                                return playersMatch && ageMatch;
                                            })
                                            .sort((a, b) => {
                                                if (sortBy === 'rating') return b.rating - a.rating;
                                                if (sortBy === 'newest') return b.id - a.id;
                                                return 0; // popular - default order
                                            })
                                            .map((game) => (
                                            <div
                                                key={game.id}
                                                className={`relative rounded-xl md:rounded-2xl overflow-hidden transition-all duration-300 hover:scale-105 ${theme === 'tron' ? 'border-2 border-cyan-500/50 hover:border-cyan-400 bg-black' : theme === 'kids' ? 'border-2 md:border-4 border-purple-300' : 'border-2 border-orange-700/50 hover:border-orange-600 bg-gray-900'} cursor-pointer`}
                                            >
                                                <div
                                                    className="aspect-square transition-all relative"
                                                    style={{ backgroundColor: theme === 'tron' ? '#0a0a0a' : theme === 'scary' ? '#1a0a00' : game.color }}
                                                >
                                                    {theme === 'tron' && (
                                                        <div className="absolute inset-0 bg-gradient-to-br from-cyan-900/20 to-transparent"></div>
                                                    )}
                                                    {theme === 'scary' && (
                                                        <div className="absolute inset-0 bg-gradient-to-br from-orange-900/20 to-transparent"></div>
                                                    )}
                                                    <div className="absolute inset-0 flex flex-col items-center justify-center p-2 md:p-3">
                                                        <div className={`mb-1 md:mb-2 ${theme === 'tron' ? 'text-cyan-400' : theme === 'scary' ? 'text-orange-500' : 'text-white'}`}>
                                                            {getGameIcon(game.id, 'w-8 h-8 md:w-10 md:h-10 lg:w-12 lg:h-12')}
                                                        </div>
                                                        <span className={`${theme === 'tron' ? 'text-cyan-400' : theme === 'scary' ? 'text-orange-400' : 'text-white'} font-bold text-xs md:text-sm text-center mb-1 md:mb-2 line-clamp-2`}>
                                                            {game.name}
                                                        </span>
                                                        <div className="flex items-center gap-0.5 md:gap-1 mb-0.5 md:mb-1">
                                                            {[1, 2, 3, 4, 5].map((i) => (
                                                                <Star key={i} className={`${theme === 'tron' ? 'text-cyan-400' : theme === 'scary' ? 'text-orange-500' : 'text-yellow-400'} inline w-2 h-2 md:w-3 md:h-3`} filled={i <= Math.floor(game.rating)} />
                                                            ))}
                                                            <span className={`text-[0.6rem] md:text-xs ${theme === 'tron' ? 'text-cyan-300' : theme === 'scary' ? 'text-orange-400' : 'text-white'} ml-0.5 md:ml-1`}>{game.rating}</span>
                                                        </div>
                                                        <span className={`text-[0.6rem] md:text-xs ${theme === 'tron' ? 'text-cyan-500' : theme === 'scary' ? 'text-orange-500' : 'text-white/80'}`}>{game.players}</span>
                                                    </div>
                                                    
                                                    <div className="absolute inset-0 bg-black/0 hover:bg-black/10 transition-all"></div>
                                                </div>
                                                
                                                <div className={`p-1.5 md:p-2 ${theme === 'tron' ? 'bg-cyan-900/20 border-t border-cyan-500/30' : theme === 'scary' ? 'bg-orange-900/20 border-t border-orange-700/30' : 'bg-white/90 border-t border-purple-200'}`}>
                                                    <div className="flex gap-1 md:gap-2">
                                                        <button
                                                            onClick={() => setSelectedGameInfo(game)}
                                                            className={`flex-1 ${theme === 'tron' ? 'bg-cyan-500/30 hover:bg-cyan-500/50 text-cyan-400' : theme === 'scary' ? 'bg-orange-700/40 hover:bg-orange-700/60 text-orange-400' : 'bg-purple-500 hover:bg-purple-400 text-white'} text-[0.6rem] md:text-xs py-1 md:py-1.5 px-1 md:px-2 rounded transition-all flex items-center justify-center gap-0.5 md:gap-1`}
                                                        >
                                                            <Info className="w-2.5 h-2.5 md:w-3 md:h-3" />
                                                            <span className="hidden sm:inline">Info</span>
                                                        </button>
                                                        <a
                                                            href={game.youtubeLink}
                                                            target="_blank"
                                                            rel="noopener noreferrer"
                                                            className={`flex-1 ${theme === 'tron' ? 'bg-red-500/30 hover:bg-red-500/50 text-red-400' : theme === 'scary' ? 'bg-red-700/40 hover:bg-red-700/60 text-red-400' : 'bg-red-500 hover:bg-red-400 text-white'} text-[0.6rem] md:text-xs py-1 md:py-1.5 px-1 md:px-2 rounded transition-all flex items-center justify-center gap-0.5 md:gap-1`}
                                                            onClick={(e) => e.stopPropagation()}
                                                        >
                                                            <Youtube className="w-2.5 h-2.5 md:w-3 md:h-3" />
                                                            <span className="hidden sm:inline">Video</span>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </>
                );
            }

            // Game Room Page
            if (page === 'room') {
                return (
                    <>
                        <Header />
                        <div className={`min-h-screen ${theme === 'tron' ? 'bg-black tron-grid' : theme === 'kids' ? 'bg-gradient-to-br from-pink-200 via-purple-200 to-blue-200' : 'bg-gradient-to-br from-gray-900 via-orange-950 to-black'} p-4 pt-28`}>
                            {isMaster && (
                                <audio ref={audioRef} loop>
                                    {theme === 'tron' && (
                                        <source src="https://www.soundjay.com/mechanical/sounds/mechanical-keyboard-slow-1.mp3" type="audio/mpeg" />
                                    )}
                                    {theme === 'kids' && (
                                        <source src="https://www.soundjay.com/misc/sounds/magic-chime-02.mp3" type="audio/mpeg" />
                                    )}
                                    {theme === 'scary' && (
                                        <source src="https://www.soundjay.com/misc/sounds/horror-bell-1.mp3" type="audio/mpeg" />
                                    )}
                                </audio>
                            )}

                            <div className="max-w-6xl mx-auto">
                                <div className={`${currentTheme.cardBg} backdrop-blur-lg rounded-2xl md:rounded-3xl p-4 md:p-8 ${theme === 'tron' ? 'tron-border' : theme === 'kids' ? 'border-2 md:border-4 border-purple-300' : 'border-2 md:border-4 border-orange-700'} mb-6`}>
                                    {/* Room Name - Full Width on Top */}
                                    <div className="mb-4 md:mb-6">
                                        <h1 className={`text-2xl md:text-4xl lg:text-5xl font-bold ${currentTheme.text} ${currentTheme.font} ${theme === 'tron' ? 'tron-text-glow' : ''} break-words`}>
                                            {currentRoom?.name}
                                            {isMaster && <Crown className={`inline-block ml-2 md:ml-3 w-6 h-6 md:w-10 md:h-10 ${theme === 'tron' ? 'text-cyan-400' : theme === 'scary' ? 'text-orange-500' : 'text-yellow-400'}`} />}
                                        </h1>
                                    </div>

                                    {/* Room ID and QR Code - Side by Side */}
                                    <div className="flex items-stretch gap-3 md:gap-4 mb-6 md:mb-8">
                                        {/* Room ID */}
                                        <div className="flex-1 flex flex-col justify-center">
                                            <span className={`text-xs md:text-sm font-semibold ${currentTheme.textSecondary} mb-2`}>Room ID:</span>
                                            <div className={`font-mono text-xl md:text-2xl lg:text-3xl font-bold tracking-wider ${theme === 'tron' ? 'bg-cyan-500/20 tron-border text-cyan-400' : theme === 'scary' ? 'bg-orange-900/30 border-2 border-orange-700 text-orange-400' : 'bg-purple-200 text-purple-900 border-2 border-purple-400'} px-3 md:px-6 py-3 md:py-4 rounded-lg text-center`}>
                                                {currentRoom?.id}
                                            </div>
                                        </div>

                                        {/* QR Code - Clickable to Expand */}
                                        <div 
                                            className={`${theme === 'tron' ? 'bg-cyan-500/20 tron-border' : theme === 'scary' ? 'bg-orange-900/30 border-2 border-orange-700' : 'bg-white border-2 md:border-4 border-purple-400'} p-2 md:p-3 rounded-xl cursor-pointer hover:scale-105 transition-transform flex flex-col items-center justify-center`}
                                            onClick={() => setQrExpanded(true)}
                                        >
                                            <div className={`w-20 h-20 md:w-24 md:h-24 ${theme === 'tron' ? 'bg-cyan-400' : theme === 'scary' ? 'bg-orange-600' : 'bg-gradient-to-br from-purple-500 to-pink-500'} rounded flex items-center justify-center`}>
                                                <QrCode className={`w-14 h-14 md:w-16 md:h-16 ${theme === 'tron' ? 'text-black' : theme === 'scary' ? 'text-white' : 'text-white'}`} />
                                            </div>
                                            <p className={`text-[0.6rem] md:text-xs text-center mt-1 ${theme === 'tron' ? 'text-cyan-400' : theme === 'scary' ? 'text-orange-400' : 'text-purple-600'} font-semibold`}>
                                                Tap to expand
                                            </p>
                                        </div>
                                    </div>

                                    {/* Expanded QR Code Modal */}
                                    {qrExpanded && (
                                        <div className="fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={() => setQrExpanded(false)}>
                                            <div className={`${currentTheme.cardBg} rounded-3xl p-8 max-w-md w-full`} onClick={(e) => e.stopPropagation()}>
                                                <h3 className={`text-2xl font-bold ${currentTheme.text} mb-4 text-center ${currentTheme.font}`}>
                                                    Scan to Join
                                                </h3>
                                                <div className={`${theme === 'tron' ? 'bg-cyan-400' : theme === 'scary' ? 'bg-orange-600' : 'bg-gradient-to-br from-purple-500 to-pink-500'} rounded-2xl p-8 mb-4`}>
                                                    <div className="bg-white rounded-xl p-6 flex items-center justify-center">
                                                        <QrCode className="w-64 h-64 text-black" />
                                                    </div>
                                                </div>
                                                <div className={`text-center mb-4 ${currentTheme.text}`}>
                                                    <p className="text-sm mb-2">Room ID:</p>
                                                    <p className="font-mono text-3xl font-bold tracking-wider">{currentRoom?.id}</p>
                                                </div>
                                                <button
                                                    onClick={() => setQrExpanded(false)}
                                                    className={`w-full ${theme === 'tron' ? 'bg-cyan-500 hover:bg-cyan-400 text-black' : theme === 'scary' ? 'bg-orange-700 hover:bg-orange-600 text-white' : 'bg-purple-500 hover:bg-purple-400 text-white'} font-bold py-3 rounded-xl transition-all`}
                                                >
                                                    Close
                                                </button>
                                            </div>
                                        </div>
                                    )}

                                    {isMaster && (
                                        <div className="mb-6">
                                            <button
                                                onClick={() => setShowGameSelector(true)}
                                                className={`w-full md:w-auto ${theme === 'tron' ? 'bg-cyan-500 hover:bg-cyan-400 text-black tron-glow' : theme === 'kids' ? 'bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 text-white kids-shadow' : 'bg-orange-700 hover:bg-orange-600 text-white shadow-[0_0_20px_rgba(194,65,12,0.5)]'} font-bold py-3 md:py-4 px-6 md:px-10 rounded-xl transition-all duration-300 hover:scale-105 shadow-lg ${currentTheme.font}`}
                                            >
                                                <span className="flex items-center justify-center gap-2 text-base md:text-lg">
                                                    <Gamepad2 className="w-5 h-5 md:w-6 md:h-6" />
                                                    {theme === 'tron' ? '[ ADD_GAMES ]' : theme === 'kids' ? 'Add Games ' : 'ADD NIGHTMARES '}
                                                </span>
                                            </button>
                                        </div>
                                    )}

                                    {/* Character Avatars Row */}
                                    <div className={`${theme === 'tron' ? 'bg-gray-900/50 border border-cyan-500/30' : theme === 'kids' ? 'bg-white/70 border-2 md:border-4 border-purple-300' : 'bg-gray-950/80 border-2 border-orange-700/50 shadow-[0_0_30px_rgba(194,65,12,0.3)]'} rounded-xl md:rounded-2xl p-4 md:p-8 mb-6`}>
                                        <h3 className={`text-base md:text-xl lg:text-2xl font-bold ${currentTheme.text} mb-4 md:mb-6 text-center ${currentTheme.font}`}>
                                            {theme === 'tron' ? 'CONNECTED_PLAYERS' : theme === 'kids' ? 'Players in the Room' : 'SUMMONED SOULS'} ({currentRoom?.players.length})
                                        </h3>
                                        <div className="flex flex-wrap justify-center gap-3 md:gap-6">
                                            {currentRoom?.players.map((player, idx) => {
                                                const character = availableCharacters.find(c => c.id === player.avatar) || availableCharacters[0];
                                                return (
                                                    <div
                                                        key={idx}
                                                        className={`relative flex flex-col items-center transition-all hover:scale-110 ${player.isMaster ? 'scale-110' : ''}`}
                                                    >
                                                        {/* Character Card */}
                                                        <div 
                                                            className={`w-20 h-24 md:w-28 md:h-36 rounded-2xl p-2 md:p-4 flex flex-col items-center justify-center relative ${
                                                                theme === 'tron' 
                                                                    ? 'bg-cyan-500/20'
                                                                    : theme === 'kids'
                                                                        ? 'bg-gradient-to-br from-purple-200 to-pink-200'
                                                                        : 'bg-gradient-to-br from-gray-900 to-orange-950/50'
                                                            }`}
                                                            style={{ 
                                                                boxShadow: theme === 'tron' 
                                                                    ? `0 0 15px ${character.color}40`
                                                                    : theme === 'scary'
                                                                        ? `0 0 15px ${character.color}30`
                                                                        : undefined
                                                            }}
                                                        >
                                                            {/* Crown for master */}
                                                            {player.isMaster && (
                                                                <div className="absolute -top-2 -right-2 bg-yellow-400 rounded-full p-1.5 md:p-2 shadow-lg animate-bounce">
                                                                    <Crown className="w-3 h-3 md:w-5 md:h-5 text-yellow-900" fill="currentColor" />
                                                                </div>
                                                            )}
                                                            
                                                            {/* Character SVG */}
                                                            <div className="flex-1 flex items-center justify-center">
                                                                <CharacterSVG characterId={character.id} size={60} color={character.color} />
                                                            </div>
                                                        </div>
                                                        
                                                        {/* Player Name Below */}
                                                        <div className={`mt-2 px-2 md:px-3 py-1 rounded-full font-semibold text-xs md:text-sm ${
                                                            theme === 'tron'
                                                                ? 'bg-gray-800 text-cyan-400'
                                                                : theme === 'kids'
                                                                    ? 'bg-white text-purple-700'
                                                                    : 'bg-gray-900 text-orange-400'
                                                        }`}>
                                                            {player.name}
                                                        </div>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>

                                    {/* Selected Games Section */}
                                    <div className={`${theme === 'tron' ? 'bg-gray-900/50 border border-cyan-500/30' : theme === 'kids' ? 'bg-white/70 border-2 md:border-4 border-purple-300' : 'bg-gray-950/80 border-2 border-orange-700/50'} rounded-xl md:rounded-2xl p-4 md:p-6`}>
                                        <h3 className={`text-base md:text-xl lg:text-2xl font-bold ${currentTheme.text} mb-3 md:mb-4 flex items-center gap-2 ${currentTheme.font}`}>
                                            <Gamepad2 className="w-5 h-5 md:w-6 md:h-6" />
                                            <span className="truncate">{theme === 'tron' ? 'SELECTED_GAMES' : theme === 'kids' ? 'Selected Games' : 'CHOSEN HORRORS'}</span>
                                            <span className="whitespace-nowrap">({selectedGames.length})</span>
                                        </h3>
                                        <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-3">
                                            {selectedGames.length === 0 ? (
                                                <p className={`${currentTheme.textSecondary} text-sm col-span-full text-center py-8`}>
                                                    {theme === 'tron' ? '> No games selected' : theme === 'kids' ? 'No games selected yet' : '> The chamber awaits...'}
                                                </p>
                                            ) : (
                                                selectedGames.map((gameId) => {
                                                    const game = MOCK_GAMES.find(g => g.id === gameId);
                                                    return (
                                                        <div
                                                            key={gameId}
                                                            className={`${theme === 'tron' ? 'bg-cyan-500/10 border border-cyan-500/30' : theme === 'kids' ? 'bg-purple-100 border-2 border-purple-300' : 'bg-orange-900/20 border border-orange-700/50'} rounded-lg p-4`}
                                                        >
                                                            <div className="flex items-start gap-3">
                                                                <div className={`${theme === 'tron' ? 'text-cyan-400' : theme === 'kids' ? 'text-purple-600' : 'text-orange-500'}`}>
                                                                    {getGameIcon(game?.id, 'w-8 h-8')}
                                                                </div>
                                                                <div className="flex-1 min-w-0">
                                                                    <div className={`${currentTheme.text} font-bold text-sm mb-1`}>{game?.name}</div>
                                                                    <div className="flex items-center gap-2 flex-wrap">
                                                                        <div className="flex items-center gap-1">
                                                                            {[1, 2, 3, 4, 5].map((i) => (
                                                                                <Star key={i} className={`${theme === 'tron' ? 'text-cyan-400' : theme === 'kids' ? 'text-yellow-400' : 'text-orange-500'} w-3 h-3`} filled={i <= Math.floor(game?.rating || 0)} />
                                                                            ))}
                                                                            <span className={`text-xs ${currentTheme.textSecondary} ml-1`}>{game?.rating}</span>
                                                                        </div>
                                                                        <button
                                                                            onClick={() => setSelectedGameDesc(game)}
                                                                            className={`text-xs ${currentTheme.text} underline hover:no-underline transition-all`}
                                                                        >
                                                                            description
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    );
                                                })
                                            )}
                                        </div>
                                    </div>

                                    {isMaster && selectedGames.length > 0 && (
                                        <div className="mt-8 text-center">
                                            <button
                                                onClick={startGame}
                                                className={`${theme === 'tron' ? 'bg-green-500 hover:bg-green-400 text-black tron-glow' : 'bg-gradient-to-r from-green-400 to-blue-400 hover:from-green-300 hover:to-blue-300 text-white kids-shadow'} font-bold py-5 px-16 rounded-2xl transition-all duration-300 hover:scale-105 shadow-xl text-2xl animate-pulse ${currentTheme.font}`}
                                            >
                                                <span className="flex items-center gap-3">
                                                    <Play className="w-8 h-8" />
                                                    {theme === 'tron' ? '[ START_GAME ]' : 'Start Game! '}
                                                </span>
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>

                            {/* Game Selector Modal */}
                            {showGameSelector && (
                                <div className="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50">
                                    <div className={`${currentTheme.cardBg} rounded-3xl p-8 max-w-6xl w-full max-h-[90vh] overflow-y-auto ${theme === 'tron' ? 'tron-border' : 'border-4 border-purple-400'}`}>
                                        <h2 className={`text-4xl font-bold ${currentTheme.text} mb-8 text-center ${currentTheme.font} ${theme === 'tron' ? 'tron-text-glow' : ''}`}>
                                            {theme === 'tron' ? '[ SELECT_GAMES ]' : 'Select Your Games '}
                                        </h2>
                                        
                                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 max-h-[60vh] overflow-y-auto pr-2">
                                            {MOCK_GAMES.map((game) => (
                                                <div
                                                    key={game.id}
                                                    className={`relative rounded-2xl overflow-hidden transition-all duration-300 hover:scale-105 ${theme === 'tron' ? 'border-2 border-cyan-500/30' : 'border-4 border-purple-300'}`}
                                                >
                                                    <button
                                                        onClick={() => toggleGame(game.id)}
                                                        className="w-full aspect-square transition-all"
                                                        style={{ backgroundColor: game.color }}
                                                    >
                                                        <div className="absolute inset-0 flex flex-col items-center justify-center p-4">
                                                            <span className="text-white font-bold text-xl text-center mb-2">
                                                                {game.name}
                                                            </span>
                                                            <StarRating rating={game.rating} />
                                                        </div>
                                                        
                                                        {selectedGames.includes(game.id) && (
                                                            <div className="absolute top-2 right-2 w-10 h-10 bg-green-500 rounded-full flex items-center justify-center">
                                                                <Check className="w-6 h-6 text-white" strokeWidth={3} />
                                                            </div>
                                                        )}
                                                        
                                                        <div className="absolute inset-0 bg-black/0 hover:bg-black/10 transition-all"></div>
                                                    </button>
                                                    
                                                    <div className="p-3 bg-black/30 backdrop-blur-sm">
                                                        <div className="flex gap-2">
                                                            <button
                                                                onClick={() => setSelectedGameInfo(game)}
                                                                className={`flex-1 ${theme === 'tron' ? 'bg-cyan-500/30 hover:bg-cyan-500/50 text-cyan-400' : 'bg-purple-500 hover:bg-purple-400 text-white'} text-xs py-2 px-3 rounded-lg transition-all flex items-center justify-center gap-1`}
                                                            >
                                                                <Info className="w-3 h-3" />
                                                                Info
                                                            </button>
                                                            <a
                                                                href={game.youtubeLink}
                                                                target="_blank"
                                                                rel="noopener noreferrer"
                                                                className={`flex-1 ${theme === 'tron' ? 'bg-red-500/30 hover:bg-red-500/50 text-red-400' : 'bg-red-500 hover:bg-red-400 text-white'} text-xs py-2 px-3 rounded-lg transition-all flex items-center justify-center gap-1`}
                                                                onClick={(e) => e.stopPropagation()}
                                                            >
                                                                <Youtube className="w-3 h-3" />
                                                                Preview
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>

                                        <button
                                            onClick={() => setShowGameSelector(false)}
                                            className={`w-full ${theme === 'tron' ? 'bg-gray-900 hover:bg-gray-800 text-cyan-400 tron-border' : 'bg-purple-500 hover:bg-purple-400 text-white kids-shadow'} font-bold py-4 rounded-xl transition-all flex items-center justify-center gap-2 text-lg`}
                                        >
                                            <X className="w-6 h-6" />
                                            {theme === 'tron' ? '[ CLOSE ]' : 'Close'}
                                        </button>
                                    </div>
                                </div>
                            )}

                            {/* Game Info Modal */}
                            {selectedGameInfo && (
                                <div className="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={() => setSelectedGameInfo(null)}>
                                    <div className={`${currentTheme.cardBg} rounded-3xl p-8 max-w-lg w-full ${theme === 'tron' ? 'tron-border' : theme === 'kids' ? 'border-4 border-purple-400' : 'border-4 border-orange-700'}`} onClick={(e) => e.stopPropagation()}>
                                        <h3 className={`text-3xl font-bold ${currentTheme.text} mb-4 ${currentTheme.font}`}>
                                            {selectedGameInfo.name}
                                        </h3>
                                        <div className="mb-4">
                                            <StarRating rating={selectedGameInfo.rating} />
                                        </div>
                                        <p className={`${currentTheme.textSecondary} mb-6 text-lg`}>
                                            {selectedGameInfo.description}
                                        </p>
                                        <button
                                            onClick={() => setSelectedGameInfo(null)}
                                            className={`w-full ${theme === 'tron' ? 'bg-cyan-500 hover:bg-cyan-400 text-black' : theme === 'kids' ? 'bg-purple-500 hover:bg-purple-400 text-white' : 'bg-orange-700 hover:bg-orange-600 text-white'} font-bold py-3 rounded-xl transition-all`}
                                        >
                                            Close
                                        </button>
                                    </div>
                                </div>
                            )}

                            {/* Selected Game Description Modal */}
                            {selectedGameDesc && (
                                <div className="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={() => setSelectedGameDesc(null)}>
                                    <div className={`${currentTheme.cardBg} backdrop-blur-xl rounded-3xl p-8 max-w-lg w-full ${theme === 'tron' ? 'tron-border' : theme === 'kids' ? 'border-4 border-purple-400' : 'border-4 border-orange-700'}`} onClick={(e) => e.stopPropagation()}>
                                        <div className="flex items-center gap-4 mb-4">
                                            <div className={`${theme === 'tron' ? 'text-cyan-400' : theme === 'kids' ? 'text-purple-600' : 'text-orange-500'}`}>
                                                {getGameIcon(selectedGameDesc.id, 'w-16 h-16')}
                                            </div>
                                            <div>
                                                <h3 className={`text-2xl font-bold ${currentTheme.text} ${currentTheme.font}`}>
                                                    {selectedGameDesc.name}
                                                </h3>
                                                <div className="flex items-center gap-1 mt-1">
                                                    {[1, 2, 3, 4, 5].map((i) => (
                                                        <Star key={i} className={`${theme === 'tron' ? 'text-cyan-400' : theme === 'kids' ? 'text-yellow-400' : 'text-orange-500'} w-4 h-4`} filled={i <= Math.floor(selectedGameDesc.rating)} />
                                                    ))}
                                                    <span className={`text-sm ${currentTheme.textSecondary} ml-1`}>{selectedGameDesc.rating}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <p className={`${currentTheme.textSecondary} mb-4 text-base`}>
                                            {selectedGameDesc.description}
                                        </p>
                                        <div className={`${currentTheme.textSecondary} text-sm mb-6`}>
                                            <div><strong>Players:</strong> {selectedGameDesc.players}</div>
                                            <div><strong>Age:</strong> {selectedGameDesc.ageMin}+</div>
                                        </div>
                                        <button
                                            onClick={() => setSelectedGameDesc(null)}
                                            className={`w-full ${theme === 'tron' ? 'bg-cyan-500 hover:bg-cyan-400 text-black' : theme === 'kids' ? 'bg-purple-500 hover:bg-purple-400 text-white' : 'bg-orange-700 hover:bg-orange-600 text-white'} font-bold py-3 rounded-xl transition-all`}
                                        >
                                            Close
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>
                    </>
                );
            }

            // Countdown Page
            if (page === 'countdown') {
                return (
                    <>
                        <Header />
                        <div className={`min-h-screen ${theme === 'tron' ? 'bg-black tron-grid' : theme === 'kids' ? 'bg-gradient-to-br from-orange-400 via-pink-500 to-purple-600' : 'bg-gradient-to-br from-gray-900 via-orange-950 to-black'} flex items-center justify-center`}>
                            <div className={`backdrop-blur-xl ${theme === 'tron' ? 'bg-gray-900/80 border-4 border-cyan-500' : theme === 'kids' ? 'bg-white/80 border-4 border-purple-400' : 'bg-gray-950/80 border-4 border-orange-600'} rounded-3xl p-16 shadow-2xl`}>
                                <h2 className={`${theme === 'tron' ? 'text-cyan-400 tron-text-glow' : theme === 'kids' ? 'text-purple-700' : 'text-orange-500'} text-5xl font-bold mb-12 animate-pulse ${currentTheme.font} text-center`}>
                                    {theme === 'tron' ? '> INITIALIZING_GAME...' : theme === 'kids' ? 'Get Ready! ' : 'THE HORROR BEGINS... '}
                                </h2>
                                <div className={`${theme === 'tron' ? 'text-cyan-400 tron-text-glow' : theme === 'kids' ? 'text-purple-700' : 'text-orange-500'} font-black leading-none ${currentTheme.font} text-center`} style={{ fontSize: '15rem' }}>
                                    {countdown}
                                </div>
                            </div>
                        </div>
                    </>
                );
            }

            // Game Page - Pictionary
            if (page === 'game') {
                return (
                    <>
                        <Header />
                        <PictionaryGame 
                            theme={theme}
                            currentTheme={currentTheme}
                            playerName={playerName}
                            selectedAvatar={selectedAvatar}
                            availableCharacters={availableCharacters}
                            currentRoom={currentRoom}
                            isMuted={isMuted}
                        />
                    </>
                );
            }

            return null;
        }

        ReactDOM.render(<GameRoomApp />, document.getElementById('root'));
    </script>
</body>
</html>
